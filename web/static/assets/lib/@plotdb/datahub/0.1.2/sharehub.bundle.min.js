(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.sharehub=f()}})(function(){var define,module,exports;var createModuleFactory=function createModuleFactory(t){var e;return function(r){return e||t(e={exports:{},parent:r},e.exports),e.exports}};var _$isArguments_26=createModuleFactory(function(module,exports){"use strict";var toStr=Object.prototype.toString;module.exports=function(t){var e=toStr.call(t),o="[object Arguments]"===e;return o||(o="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===toStr.call(t.callee)),o}});function bootstrapTransform(r,t,n,e){var l=r.transformX=function(r,o){n(r),n(o);for(var f,a,h,g=[],i=0;i<o.length;i++){for(var u=o[i],s=[],v=0;v<r.length;){var m=[];if(f=r[v],h=m,t(s,f,a=u,"left"),t(h,a,f,"right"),v++,1!==m.length){if(0===m.length){for(var b=v;b<r.length;b++)e(s,r[b]);u=null;break}for(var c=l(r.slice(v),m),p=0;p<c[0].length;p++)e(s,c[0][p]);for(var k=0;k<c[1].length;k++)e(g,c[1][k]);u=null;break}u=m[0]}null!=u&&e(g,u),r=s}return[r,g]};r.transform=function(r,n,e){if("left"!==e&&"right"!==e)throw new Error("type must be 'left' or 'right'");return 0===n.length?r:1===r.length&&1===n.length?t([],r[0],n[0],e):"left"===e?l(r,n)[0]:l(n,r)[1]}}var _$bootstrapTransform_27=bootstrapTransform;var _$text0_30={};var text=_$text0_30={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(e){if(null!=e&&"string"!=typeof e)throw new Error("Initial data must be a string");return e||""}},strInject=function(e,n,t){return e.slice(0,n)+t+e.slice(n)},checkValidComponent=function(e){if("number"!=typeof e.p)throw new Error("component missing position field");if("string"==typeof e.i==("string"==typeof e.d))throw new Error("component needs an i or d field");if(e.p<0)throw new Error("position cannot be negative")},checkValidOp=function(e){for(var n=0;n<e.length;n++)checkValidComponent(e[n])};text.apply=function(e,n){var t,p=typeof e;if("string"!==p)throw new Error("text0 operations cannot be applied to type: "+p);checkValidOp(n);for(var r=0;r<n.length;r++){var i=n[r];if(null!=i.i)e=strInject(e,i.p,i.i);else{if(t=e.slice(i.p,i.p+i.d.length),i.d!==t)throw new Error("Delete component '"+i.d+"' does not match deleted text '"+t+"'");e=e.slice(0,i.p)+e.slice(i.p+i.d.length)}}return e};var append=text._append=function(e,n){if(""!==n.i&&""!==n.d)if(0===e.length)e.push(n);else{var t=e[e.length-1];null!=t.i&&null!=n.i&&t.p<=n.p&&n.p<=t.p+t.i.length?e[e.length-1]={i:strInject(t.i,n.p-t.p,n.i),p:t.p}:null!=t.d&&null!=n.d&&n.p<=t.p&&t.p<=n.p+n.d.length?e[e.length-1]={d:strInject(n.d,t.p-n.p,t.d),p:n.p}:e.push(n)}};text.compose=function(e,n){checkValidOp(e),checkValidOp(n);for(var t=e.slice(),p=0;p<n.length;p++)append(t,n[p]);return t},text.normalize=function(e){var n=[];null==e.i&&null==e.p||(e=[e]);for(var t=0;t<e.length;t++){var p=e[t];null==p.p&&(p.p=0),append(n,p)}return n};var transformPosition=function(e,n,t){return null!=n.i?n.p<e||n.p===e&&t?e+n.i.length:e:e<=n.p?e:e<=n.p+n.d.length?n.p:e-n.d.length};text.transformCursor=function(e,n,t){for(var p="right"===t,r=0;r<n.length;r++)e=transformPosition(e,n[r],p);return e};var transformComponent=text._tc=function(e,n,t,p){if(checkValidComponent(n),checkValidComponent(t),null!=n.i)append(e,{i:n.i,p:transformPosition(n.p,t,"right"===p)});else if(null!=t.i){var r=n.d;n.p<t.p&&(append(e,{d:r.slice(0,t.p-n.p),p:n.p}),r=r.slice(t.p-n.p)),""!==r&&append(e,{d:r,p:n.p+t.i.length})}else if(n.p>=t.p+t.d.length)append(e,{d:n.d,p:n.p-t.d.length});else if(n.p+n.d.length<=t.p)append(e,n);else{var i={d:"",p:n.p};n.p<t.p&&(i.d=n.d.slice(0,t.p-n.p)),n.p+n.d.length>t.p+t.d.length&&(i.d+=n.d.slice(t.p+t.d.length-n.p));var o=Math.max(n.p,t.p),l=Math.min(n.p+n.d.length,t.p+t.d.length);if(n.d.slice(o-n.p,l-n.p)!==t.d.slice(o-t.p,l-t.p))throw new Error("Delete ops delete different text in the same region of the document");""!==i.d&&(i.p=transformPosition(i.p,t),append(e,i))}return e},invertComponent=function(e){return null!=e.i?{d:e.i,p:e.p}:{i:e.d,p:e.p}};text.invert=function(e){e=e.slice().reverse();for(var n=0;n<e.length;n++)e[n]=invertComponent(e[n]);return e},_$bootstrapTransform_27(text,transformComponent,checkValidOp,append);var _$json0_29={};var isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)},isObject=function(e){return!!e&&e.constructor===Object},clone=function(e){return JSON.parse(JSON.stringify(e))},json={name:"json0",uri:"http://sharejs.org/types/JSONv0"},subtypes={};function convertFromText(e){e.t="text0";var o={p:e.p.pop()};null!=e.si&&(o.i=e.si),null!=e.sd&&(o.d=e.sd),e.o=[o]}function convertToText(e){e.p.push(e.o[0].p),null!=e.o[0].i&&(e.si=e.o[0].i),null!=e.o[0].d&&(e.sd=e.o[0].d),delete e.t,delete e.o}json.registerSubtype=function(e){subtypes[e.name]=e},json.create=function(e){return void 0===e?null:clone(e)},json.invertComponent=function(e){var o={p:e.p};return e.t&&subtypes[e.t]&&(o.t=e.t,o.o=subtypes[e.t].invert(e.o)),void 0!==e.si&&(o.sd=e.si),void 0!==e.sd&&(o.si=e.sd),void 0!==e.oi&&(o.od=e.oi),void 0!==e.od&&(o.oi=e.od),void 0!==e.li&&(o.ld=e.li),void 0!==e.ld&&(o.li=e.ld),void 0!==e.na&&(o.na=-e.na),void 0!==e.lm&&(o.lm=e.p[e.p.length-1],o.p=e.p.slice(0,e.p.length-1).concat([e.lm])),o},json.invert=function(e){for(var o=e.slice().reverse(),n=[],i=0;i<o.length;i++)n.push(json.invertComponent(o[i]));return n},json.checkValidOp=function(e){for(var o=0;o<e.length;o++)if(!isArray(e[o].p))throw new Error("Missing path")},json.checkList=function(e){if(!isArray(e))throw new Error("Referenced element not a list")},json.checkObj=function(e){if(!isObject(e))throw new Error("Referenced element not an object (it was "+JSON.stringify(e)+")")},json.apply=function(e,o){json.checkValidOp(o),o=clone(o);for(var n={data:e},i=0;i<o.length;i++){var t=o[i];null==t.si&&null==t.sd||convertFromText(t);for(var l=null,r=n,s="data",p=0;p<t.p.length;p++){var d=t.p[p];if(l=r,s,r=r[s],s=d,isArray(r)&&"number"!=typeof s)throw new Error("List index must be a number");if(isObject(r)&&"string"!=typeof s)throw new Error("Object key must be a string");if(null==l)throw new Error("Path invalid")}if(t.t&&void 0!==t.o&&subtypes[t.t])r[s]=subtypes[t.t].apply(r[s],t.o);else if(void 0!==t.na){if("number"!=typeof r[s])throw new Error("Referenced element not a number");if("number"!=typeof t.na)throw new Error("Number addition is not a number");r[s]+=t.na}else if(void 0!==t.li&&void 0!==t.ld)json.checkList(r),r[s]=t.li;else if(void 0!==t.li)json.checkList(r),r.splice(s,0,t.li);else if(void 0!==t.ld)json.checkList(r),r.splice(s,1);else if(void 0!==t.lm){if("number"!=typeof t.lm)throw new Error("List move target index must be a number");if(json.checkList(r),t.lm!=s){var u=r[s];r.splice(s,1),r.splice(t.lm,0,u)}}else if(void 0!==t.oi)json.checkObj(r),r[s]=t.oi;else{if(void 0===t.od)throw new Error("invalid / missing instruction in op");json.checkObj(r),delete r[s]}}return n.data},json.shatter=function(e){for(var o=[],n=0;n<e.length;n++)o.push([e[n]]);return o},json.incrementalApply=function(e,o,n){for(var i=0;i<o.length;i++){var t=[o[i]];n(t,e=json.apply(e,t))}return e};var pathMatches=json.pathMatches=function(e,o,n){if(e.length!=o.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==o[i]&&(!n||i!==e.length-1))return!1;return!0};json.append=function(e,o){if(o=clone(o),0!==e.length){var n=e[e.length-1];if(null==o.si&&null==o.sd||null==n.si&&null==n.sd||(convertFromText(o),convertFromText(n)),pathMatches(o.p,n.p))if(o.t&&n.t&&o.t===n.t&&subtypes[o.t]){if(n.o=subtypes[o.t].compose(n.o,o.o),null!=o.si||null!=o.sd){for(var i=o.p,t=0;t<n.o.length-1;t++)o.o=[n.o.pop()],o.p=i.slice(),convertToText(o),e.push(o);convertToText(n)}}else null!=n.na&&null!=o.na?e[e.length-1]={p:n.p,na:n.na+o.na}:void 0!==n.li&&void 0===o.li&&o.ld===n.li?void 0!==n.ld?delete n.li:e.pop():void 0!==n.od&&void 0===n.oi&&void 0!==o.oi&&void 0===o.od?n.oi=o.oi:void 0!==n.oi&&void 0!==o.od?void 0!==o.oi?n.oi=o.oi:void 0!==n.od?delete n.oi:e.pop():void 0!==o.lm&&o.p[o.p.length-1]===o.lm||e.push(o);else null==o.si&&null==o.sd||null==n.si&&null==n.sd||(convertToText(o),convertToText(n)),e.push(o)}else e.push(o)},json.compose=function(e,o){json.checkValidOp(e),json.checkValidOp(o);for(var n=clone(e),i=0;i<o.length;i++)json.append(n,o[i]);return n},json.normalize=function(e){var o=[];e=isArray(e)?e:[e];for(var n=0;n<e.length;n++){var i=e[n];null==i.p&&(i.p=[]),json.append(o,i)}return o},json.commonLengthForOps=function(e,o){var n=e.p.length,i=o.p.length;if((null!=e.na||e.t)&&n++,(null!=o.na||o.t)&&i++,0===n)return-1;if(0===i)return null;n--,i--;for(var t=0;t<n;t++){var l=e.p[t];if(t>=i||l!==o.p[t])return null}return n},json.canOpAffectPath=function(e,o){return null!=json.commonLengthForOps({p:o},e)},json.transformComponent=function(e,o,n,i){o=clone(o);var t=json.commonLengthForOps(n,o),l=json.commonLengthForOps(o,n),r=o.p.length,s=n.p.length;if((null!=o.na||o.t)&&r++,(null!=n.na||n.t)&&s++,null!=l&&s>r&&o.p[l]==n.p[l])if(void 0!==o.ld)(d=clone(n)).p=d.p.slice(r),o.ld=json.apply(clone(o.ld),[d]);else if(void 0!==o.od){(d=clone(n)).p=d.p.slice(r),o.od=json.apply(clone(o.od),[d])}if(null!=t){var p=r==s,d=n;if(null==o.si&&null==o.sd||null==n.si&&null==n.sd||(convertFromText(o),convertFromText(d=clone(n))),d.t&&subtypes[d.t]){if(o.t&&o.t===d.t){var u=subtypes[o.t].transform(o.o,d.o,i);if(null!=o.si||null!=o.sd)for(var f=o.p,a=0;a<u.length;a++)o.o=[u[a]],o.p=f.slice(),convertToText(o),json.append(e,o);else(!isArray(u)||u.length>0)&&(o.o=u,json.append(e,o));return e}}else if(void 0!==n.na);else if(void 0!==n.li&&void 0!==n.ld){if(n.p[t]===o.p[t]){if(!p)return e;if(void 0!==o.ld){if(void 0===o.li||"left"!==i)return e;o.ld=clone(n.li)}}}else if(void 0!==n.li)void 0!==o.li&&void 0===o.ld&&p&&o.p[t]===n.p[t]?"right"===i&&o.p[t]++:n.p[t]<=o.p[t]&&o.p[t]++,void 0!==o.lm&&p&&n.p[t]<=o.lm&&o.lm++;else if(void 0!==n.ld){if(void 0!==o.lm&&p){if(n.p[t]===o.p[t])return e;f=n.p[t];var c=o.p[t];(f<(v=o.lm)||f===v&&c<v)&&o.lm--}if(n.p[t]<o.p[t])o.p[t]--;else if(n.p[t]===o.p[t]){if(s<r)return e;if(void 0!==o.ld){if(void 0===o.li)return e;delete o.ld}}}else if(void 0!==n.lm)if(void 0!==o.lm&&r===s){c=o.p[t];var v=o.lm,m=n.p[t],h=n.lm;if(m!==h)if(c===m){if("left"!==i)return e;o.p[t]=h,c===v&&(o.lm=h)}else c>m&&o.p[t]--,c>h?o.p[t]++:c===h&&m>h&&(o.p[t]++,c===v&&o.lm++),v>m?o.lm--:v===m&&v>c&&o.lm--,v>h?o.lm++:v===h&&(h>m&&v>c||h<m&&v<c?"right"===i&&o.lm++:v>c?o.lm++:v===m&&o.lm--)}else if(void 0!==o.li&&void 0===o.ld&&p){c=n.p[t],v=n.lm;(f=o.p[t])>c&&o.p[t]--,f>v&&o.p[t]++}else{c=n.p[t],v=n.lm;(f=o.p[t])===c?o.p[t]=v:(f>c&&o.p[t]--,f>v?o.p[t]++:f===v&&c>v&&o.p[t]++)}else if(void 0!==n.oi&&void 0!==n.od){if(o.p[t]===n.p[t]){if(void 0===o.oi||!p)return e;if("right"===i)return e;o.od=n.oi}}else if(void 0!==n.oi){if(void 0!==o.oi&&o.p[t]===n.p[t]){if("left"!==i)return e;json.append(e,{p:o.p,od:n.oi})}}else if(void 0!==n.od&&o.p[t]==n.p[t]){if(!p)return e;if(void 0===o.oi)return e;delete o.od}}return json.append(e,o),e},_$bootstrapTransform_27(json,json.transformComponent,json.checkValidOp,json.append);json.registerSubtype(_$text0_30),_$json0_29=json;var _$lib_28={type:_$json0_29};"use strict";var keysShim;if(!Object.keys){var has=Object.prototype.hasOwnProperty,__toStr_24=Object.prototype.toString,isArgs=_$isArguments_26({}),isEnumerable=Object.prototype.propertyIsEnumerable,hasDontEnumBug=!isEnumerable.call({toString:null},"toString"),hasProtoEnumBug=isEnumerable.call(function(){},"prototype"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],equalsConstructorPrototype=function(t){var o=t.constructor;return o&&o.prototype===t},excludedKeys={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},hasAutomationEqualityBug=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!excludedKeys["$"+t]&&has.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{equalsConstructorPrototype(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),equalsConstructorPrototypeIfNotBuggy=function(t){if("undefined"==typeof window||!hasAutomationEqualityBug)return equalsConstructorPrototype(t);try{return equalsConstructorPrototype(t)}catch(t){return!1}};keysShim=function(t){var o=null!==t&&"object"==typeof t,r="[object Function]"===__toStr_24.call(t),e=isArgs(t),n=o&&"[object String]"===__toStr_24.call(t),u=[];if(!o&&!r&&!e)throw new TypeError("Object.keys called on a non-object");var s=hasProtoEnumBug&&r;if(n&&t.length>0&&!has.call(t,0))for(var a=0;a<t.length;++a)u.push(String(a));if(e&&t.length>0)for(var l=0;l<t.length;++l)u.push(String(l));else for(var i in t)s&&"prototype"===i||!has.call(t,i)||u.push(String(i));if(hasDontEnumBug)for(var c=equalsConstructorPrototypeIfNotBuggy(t),p=0;p<dontEnums.length;++p)c&&"constructor"===dontEnums[p]||!has.call(t,dontEnums[p])||u.push(dontEnums[p]);return u}}var _$keysShim_24=keysShim;var _$objectKeys_25={};"use strict";var slice=Array.prototype.slice,__isArgs_25=_$isArguments_26({}),origKeys=Object.keys,__keysShim_25=origKeys?function(e){return origKeys(e)}:_$keysShim_24,originalKeys=Object.keys;__keysShim_25.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return __isArgs_25(e)?originalKeys(slice.call(e)):originalKeys(e)}):Object.keys=__keysShim_25;return Object.keys||__keysShim_25},_$objectKeys_25=__keysShim_25;"use strict";var _$shams_13=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var o=Object.getOwnPropertySymbols(t);if(1!==o.length||o[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(t,e);if(42!==n.value||!0!==n.enumerable)return!1}return!0};"use strict";var _$shams_14=function(){return _$shams_13()&&!!Symbol.toStringTag};"use strict";var origSymbol="undefined"!=typeof Symbol&&Symbol;var _$hasSymbols_12=function(){return"function"==typeof origSymbol&&("function"==typeof Symbol&&("symbol"==typeof origSymbol("foo")&&("symbol"==typeof Symbol("bar")&&_$shams_13())))};"use strict";var ERROR_MESSAGE="Function.prototype.bind called on incompatible ",__slice_9=Array.prototype.slice,__toStr_9=Object.prototype.toString,funcType="[object Function]";var _$implementation_9=function(t){var n=this;if("function"!=typeof n||__toStr_9.call(n)!==funcType)throw new TypeError(ERROR_MESSAGE+n);for(var o,e=__slice_9.call(arguments,1),r=Math.max(0,n.length-e.length),c=[],i=0;i<r;i++)c.push("$"+i);if(o=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof o){var r=n.apply(this,e.concat(__slice_9.call(arguments)));return Object(r)===r?r:this}return n.apply(t,e.concat(__slice_9.call(arguments)))}),n.prototype){var p=function(){};p.prototype=n.prototype,o.prototype=new p,p.prototype=null}return o};"use strict";var _$functionBind_10=Function.prototype.bind||_$implementation_9;"use strict";var _$src_15=_$functionBind_10.call(Function.call,Object.prototype.hasOwnProperty);"use strict";var undefined,$SyntaxError=SyntaxError,$Function=Function,$TypeError=TypeError,getEvalledConstructor=function(r){try{return $Function('"use strict"; return ('+r+").constructor;")()}catch(r){}},$gOPD=Object.getOwnPropertyDescriptor;if($gOPD)try{$gOPD({},"")}catch(r){$gOPD=null}var throwTypeError=function(){throw new $TypeError},ThrowTypeError=$gOPD?function(){try{return arguments.callee,throwTypeError}catch(r){try{return $gOPD(arguments,"callee").get}catch(r){return throwTypeError}}}():throwTypeError,__hasSymbols_11=_$hasSymbols_12(),getProto=Object.getPrototypeOf||function(r){return r.__proto__},needsEval={},TypedArray="undefined"==typeof Uint8Array?undefined:getProto(Uint8Array),INTRINSICS={"%AggregateError%":"undefined"==typeof AggregateError?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":__hasSymbols_11?getProto([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":"undefined"==typeof Atomics?undefined:Atomics,"%BigInt%":"undefined"==typeof BigInt?undefined:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?undefined:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?undefined:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?undefined:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":"undefined"==typeof Int8Array?undefined:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?undefined:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":__hasSymbols_11?getProto(getProto([][Symbol.iterator]())):undefined,"%JSON%":"object"==typeof JSON?JSON:undefined,"%Map%":"undefined"==typeof Map?undefined:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&__hasSymbols_11?getProto((new Map)[Symbol.iterator]()):undefined,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?undefined:Promise,"%Proxy%":"undefined"==typeof Proxy?undefined:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?undefined:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?undefined:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&__hasSymbols_11?getProto((new Set)[Symbol.iterator]()):undefined,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":__hasSymbols_11?getProto(""[Symbol.iterator]()):undefined,"%Symbol%":__hasSymbols_11?Symbol:undefined,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError,"%Uint8Array%":"undefined"==typeof Uint8Array?undefined:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?undefined:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?undefined:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?undefined:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?undefined:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?undefined:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?undefined:WeakSet},doEval=function r(e){var t;if("%AsyncFunction%"===e)t=getEvalledConstructor("async function () {}");else if("%GeneratorFunction%"===e)t=getEvalledConstructor("function* () {}");else if("%AsyncGeneratorFunction%"===e)t=getEvalledConstructor("async function* () {}");else if("%AsyncGenerator%"===e){var o=r("%AsyncGeneratorFunction%");o&&(t=o.prototype)}else if("%AsyncIteratorPrototype%"===e){var n=r("%AsyncGenerator%");n&&(t=getProto(n.prototype))}return INTRINSICS[e]=t,t},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},$concat=_$functionBind_10.call(Function.call,Array.prototype.concat),$spliceApply=_$functionBind_10.call(Function.apply,Array.prototype.splice),$replace=_$functionBind_10.call(Function.call,String.prototype.replace),$strSlice=_$functionBind_10.call(Function.call,String.prototype.slice),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(r){var e=$strSlice(r,0,1),t=$strSlice(r,-1);if("%"===e&&"%"!==t)throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if("%"===t&&"%"!==e)throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var o=[];return $replace(r,rePropName,function(r,e,t,n){o[o.length]=t?$replace(n,reEscapeChar,"$1"):e||r}),o},getBaseIntrinsic=function(r,e){var t,o=r;if(_$src_15(LEGACY_ALIASES,o)&&(o="%"+(t=LEGACY_ALIASES[o])[0]+"%"),_$src_15(INTRINSICS,o)){var n=INTRINSICS[o];if(n===needsEval&&(n=doEval(o)),void 0===n&&!e)throw new $TypeError("intrinsic "+r+" exists, but is not available. Please file an issue!");return{alias:t,name:o,value:n}}throw new $SyntaxError("intrinsic "+r+" does not exist!")};var _$getIntrinsic_11=function(r,e){if("string"!=typeof r||0===r.length)throw new $TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new $TypeError('"allowMissing" argument must be a boolean');var t=stringToPath(r),o=t.length>0?t[0]:"",n=getBaseIntrinsic("%"+o+"%",e),a=n.name,y=n.value,i=!1,p=n.alias;p&&(o=p[0],$spliceApply(t,$concat([0,1],p)));for(var d=1,f=!0;d<t.length;d+=1){var s=t[d],u=$strSlice(s,0,1),c=$strSlice(s,-1);if(('"'===u||"'"===u||"`"===u||'"'===c||"'"===c||"`"===c)&&u!==c)throw new $SyntaxError("property names with quotes must have matching quotes");if("constructor"!==s&&f||(i=!0),_$src_15(INTRINSICS,a="%"+(o+="."+s)+"%"))y=INTRINSICS[a];else if(null!=y){if(!(s in y)){if(!e)throw new $TypeError("base intrinsic for "+r+" exists, but the property is not available.");return}if($gOPD&&d+1>=t.length){var l=$gOPD(y,s);y=(f=!!l)&&"get"in l&&!("originalValue"in l.get)?l.get:y[s]}else f=_$src_15(y,s),y=y[s];f&&!i&&(INTRINSICS[a]=y)}}return y};var _$callBind_5={};"use strict";var $apply=_$getIntrinsic_11("%Function.prototype.apply%"),$call=_$getIntrinsic_11("%Function.prototype.call%"),$reflectApply=_$getIntrinsic_11("%Reflect.apply%",!0)||_$functionBind_10.call($call,$apply),__$gOPD_5=_$getIntrinsic_11("%Object.getOwnPropertyDescriptor%",!0),$defineProperty=_$getIntrinsic_11("%Object.defineProperty%",!0),$max=_$getIntrinsic_11("%Math.max%");if($defineProperty)try{$defineProperty({},"a",{value:1})}catch(e){$defineProperty=null}_$callBind_5=function(e){var t=$reflectApply(_$functionBind_10,$call,arguments);__$gOPD_5&&$defineProperty&&(__$gOPD_5(t,"length").configurable&&$defineProperty(t,"length",{value:1+$max(0,e.length-(arguments.length-1))}));return t};var applyBind=function(){return $reflectApply(_$functionBind_10,$apply,arguments)};$defineProperty?$defineProperty(_$callBind_5,"apply",{value:applyBind}):_$callBind_5.apply=applyBind;"use strict";var $indexOf=_$callBind_5(_$getIntrinsic_11("String.prototype.indexOf"));var _$callBound_4=function(i,n){var t=_$getIntrinsic_11(i,!!n);return"function"==typeof t&&$indexOf(i,".prototype.")>-1?_$callBind_5(t):t};var _$isArguments_16={};"use strict";var hasToStringTag=_$shams_14(),$toString=_$callBound_4("Object.prototype.toString"),isStandardArguments=function(t){return!(hasToStringTag&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===$toString(t)},isLegacyArguments=function(t){return!!isStandardArguments(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==$toString(t)&&"[object Function]"===$toString(t.callee)},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments,_$isArguments_16=supportsStandardArguments?isStandardArguments:isLegacyArguments;var _$defineProperties_7={};"use strict";var __hasSymbols_7="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),__toStr_7=Object.prototype.toString,concat=Array.prototype.concat,origDefineProperty=Object.defineProperty,isFunction=function(e){return"function"==typeof e&&"[object Function]"===__toStr_7.call(e)},arePropertyDescriptorsSupported=function(){var e={};try{for(var r in origDefineProperty(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}},supportsDescriptors=origDefineProperty&&arePropertyDescriptorsSupported(),defineProperty=function(e,r,t,o){(!(r in e)||isFunction(o)&&o())&&(supportsDescriptors?origDefineProperty(e,r,{configurable:!0,enumerable:!1,value:t,writable:!0}):e[r]=t)},defineProperties=function(e,r){var t=arguments.length>2?arguments[2]:{},o=_$objectKeys_25(r);__hasSymbols_7&&(o=concat.call(o,Object.getOwnPropertySymbols(r)));for(var n=0;n<o.length;n+=1)defineProperty(e,o[n],r[o[n]],t[o[n]])};defineProperties.supportsDescriptors=!!supportsDescriptors,_$defineProperties_7=defineProperties;"use strict";var numberIsNaN=function(r){return r!=r};var _$implementation_20=function(r,n){return 0===r&&0===n?1/r==1/n:r===n||!(!numberIsNaN(r)||!numberIsNaN(n))};"use strict";var _$polyfill_22=function(){return"function"==typeof Object.is?Object.is:_$implementation_20};"use strict";var _$shim_23=function(){var e=_$polyfill_22();return _$defineProperties_7(Object,{is:e},{is:function(){return Object.is!==e}}),e};var _$objectIs_21={};"use strict";var polyfill=_$callBind_5(_$polyfill_22(),Object);_$defineProperties_7(polyfill,{getPolyfill:_$polyfill_22,implementation:_$implementation_20,shim:_$shim_23}),_$objectIs_21=polyfill;"use strict";var __has_18,$exec,isRegexMarker,badStringifier,__hasToStringTag_18=_$shams_14();if(__hasToStringTag_18){__has_18=_$callBound_4("Object.prototype.hasOwnProperty"),$exec=_$callBound_4("RegExp.prototype.exec"),isRegexMarker={};var throwRegexMarker=function(){throw isRegexMarker};badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker},"symbol"==typeof Symbol.toPrimitive&&(badStringifier[Symbol.toPrimitive]=throwRegexMarker)}var __$toString_18=_$callBound_4("Object.prototype.toString"),gOPD=Object.getOwnPropertyDescriptor,regexClass="[object RegExp]";var _$isRegex_18=__hasToStringTag_18?function(e){if(!e||"object"!=typeof e)return!1;var r=gOPD(e,"lastIndex");if(!(r&&__has_18(r,"value")))return!1;try{$exec(e,badStringifier)}catch(e){return e===isRegexMarker}}:function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&__$toString_18(e)===regexClass};"use strict";var $Object=Object,__$TypeError_31=TypeError;var _$implementation_31=function(){if(null!=this&&this!==$Object(this))throw new __$TypeError_31("RegExp.prototype.flags getter called on non-object");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t};"use strict";var __supportsDescriptors_33=_$defineProperties_7.supportsDescriptors,__$gOPD_33=Object.getOwnPropertyDescriptor,__$TypeError_33=TypeError;var _$polyfill_33=function(){if(!__supportsDescriptors_33)throw new __$TypeError_33("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var r=__$gOPD_33(RegExp.prototype,"flags");if(r&&"function"==typeof r.get&&"boolean"==typeof/a/.dotAll)return r.get}return _$implementation_31};"use strict";var __supportsDescriptors_34=_$defineProperties_7.supportsDescriptors,__gOPD_34=Object.getOwnPropertyDescriptor,__defineProperty_34=Object.defineProperty,TypeErr=TypeError,__getProto_34=Object.getPrototypeOf,regex=/a/;var _$shim_34=function(){if(!__supportsDescriptors_34||!__getProto_34)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=_$polyfill_33(),r=__getProto_34(regex),t=__gOPD_34(r,"flags");return t&&t.get===e||__defineProperty_34(r,"flags",{configurable:!0,enumerable:!1,get:e}),e};var _$regexpPrototypeFlags_32={};"use strict";var flagsBound=_$callBind_5(_$implementation_31);_$defineProperties_7(flagsBound,{getPolyfill:_$polyfill_33,implementation:_$implementation_31,shim:_$shim_34}),_$regexpPrototypeFlags_32=flagsBound;"use strict";var getDay=Date.prototype.getDay,tryDateObject=function(t){try{return getDay.call(t),!0}catch(t){return!1}},__toStr_17=Object.prototype.toString,dateClass="[object Date]",__hasToStringTag_17=_$shams_14();var _$isDateObject_17=function(t){return"object"==typeof t&&null!==t&&(__hasToStringTag_17?tryDateObject(t):__toStr_17.call(t)===dateClass)};var getTime=Date.prototype.getTime;function deepEqual(e,r,t){var i=t||{};return!(i.strict?!_$objectIs_21(e,r):e!==r)||(!e||!r||"object"!=typeof e&&"object"!=typeof r?i.strict?_$objectIs_21(e,r):e==r:objEquiv(e,r,i))}function isUndefinedOrNull(e){return null==e}function isBuffer(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}function objEquiv(e,r,t){var i,n;if(typeof e!=typeof r)return!1;if(isUndefinedOrNull(e)||isUndefinedOrNull(r))return!1;if(e.prototype!==r.prototype)return!1;if(_$isArguments_16(e)!==_$isArguments_16(r))return!1;var u=_$isRegex_18(e),f=_$isRegex_18(r);if(u!==f)return!1;if(u||f)return e.source===r.source&&_$regexpPrototypeFlags_32(e)===_$regexpPrototypeFlags_32(r);if(_$isDateObject_17(e)&&_$isDateObject_17(r))return getTime.call(e)===getTime.call(r);var o=isBuffer(e),s=isBuffer(r);if(o!==s)return!1;if(o||s){if(e.length!==r.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==r[i])return!1;return!0}if(typeof e!=typeof r)return!1;try{var l=_$objectKeys_25(e),g=_$objectKeys_25(r)}catch(e){return!1}if(l.length!==g.length)return!1;for(l.sort(),g.sort(),i=l.length-1;i>=0;i--)if(l[i]!=g[i])return!1;for(i=l.length-1;i>=0;i--)if(!deepEqual(e[n=l[i]],r[n],t))return!1;return!0}var _$deepEqual_6=deepEqual;"use strict";var diffMatchPatchInstance;function patchesToOps(e,t,r,i,n){const f=[];var a=n.patch_make(t,r);return Object.keys(a).forEach(function(t){var r=a[t],n=r.start1;r.diffs.forEach(function([t,r]){switch(t){case i.DIFF_DELETE:f.push({sd:r,p:[...e,n]});break;case i.DIFF_INSERT:f.push({si:r,p:[...e,n]});case i.DIFF_EQUAL:n+=r.length;break;default:throw Error(`Unsupported operation type: ${t}`)}})}),f}var optimize=function(e){for(var t=0,r=e.length-1;t<r;++t){var i=e[t],n=e[t+1];_$deepEqual_6(i.p.slice(0,-1),n.p.slice(0,-1))&&(i.p[i.p.length-1]+1===n.p[n.p.length-1]&&i.li&&n.ld&&_$deepEqual_6(i.li,n.ld)&&(delete i.li,delete n.ld))}return e=e.filter(function(e){return Object.keys(e).length>1})},diff=function(e,t,r=[],i){var n="string"==typeof r[r.length-1]||0===r.length;if(_$deepEqual_6(e,t))return[];if(void 0===t)return(f={p:r})[n?"od":"ld"]=e,[f];if(void 0===e)return(f={p:r})[n?"oi":"li"]=t,[f];if(i&&"string"==typeof e&&"string"==typeof t)return diffMatchPatchInstance||(diffMatchPatchInstance=new i),patchesToOps(r,e,t,i,diffMatchPatchInstance);var f,a=["string","number","boolean"];if(a.includes(typeof t)||a.includes(typeof e))return(f={p:r})[n?"od":"ld"]=e,f[n?"oi":"li"]=t,[f];if(Array.isArray(t)&&Array.isArray(e)){for(var o=[],c=e.length,s=t.length,u=Math.min(c,s),l=(o=[],0);l<u;++l){diff(e[l],t[l],[...r,l],i).forEach(function(e){o.push(e)})}if(s>c)for(l=u;l<s;l++){diff(void 0,t[l],[...r,l],i).forEach(function(e){o.push(e)})}else if(s<c)for(l=u;l<c;l++){diff(e[l],void 0,[...r,u],i).forEach(function(e){o.push(e)})}return o}if(Array.isArray(t)||Array.isArray(e))return(f={p:r})[n?"od":"ld"]=e,f[n?"oi":"li"]=t,[f];o=[];return new Set([...Object.keys(e),...Object.keys(t)]).forEach(function(n){var f=diff(e[n],t[n],[...r,n],i);o=o.concat(f)}),o},optimizedDiff=function(e,t,r){return optimize(diff(e,t,[],r))};var _$optimizedDiff_19=optimizedDiff;var _$diffMatchPatch_8={};var diff_match_patch=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},DIFF_DELETE=-1,DIFF_INSERT=1,DIFF_EQUAL=0;diff_match_patch.Diff=function(t,i){return[t,i]},diff_match_patch.prototype.diff_main=function(t,i,h,e){void 0===e&&(e=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var f=e;if(null==t||null==i)throw new Error("Null input. (diff_main)");if(t==i)return t?[new diff_match_patch.Diff(DIFF_EQUAL,t)]:[];void 0===h&&(h=!0);var n=h,a=this.diff_commonPrefix(t,i),r=t.substring(0,a);t=t.substring(a),i=i.substring(a),a=this.diff_commonSuffix(t,i);var s=t.substring(t.length-a);t=t.substring(0,t.length-a),i=i.substring(0,i.length-a);var _=this.diff_compute_(t,i,n,f);return r&&_.unshift(new diff_match_patch.Diff(DIFF_EQUAL,r)),s&&_.push(new diff_match_patch.Diff(DIFF_EQUAL,s)),this.diff_cleanupMerge(_),_},diff_match_patch.prototype.diff_compute_=function(t,i,h,e){var f;if(!t)return[new diff_match_patch.Diff(DIFF_INSERT,i)];if(!i)return[new diff_match_patch.Diff(DIFF_DELETE,t)];var n=t.length>i.length?t:i,a=t.length>i.length?i:t,r=n.indexOf(a);if(-1!=r)return f=[new diff_match_patch.Diff(DIFF_INSERT,n.substring(0,r)),new diff_match_patch.Diff(DIFF_EQUAL,a),new diff_match_patch.Diff(DIFF_INSERT,n.substring(r+a.length))],t.length>i.length&&(f[0][0]=f[2][0]=DIFF_DELETE),f;if(1==a.length)return[new diff_match_patch.Diff(DIFF_DELETE,t),new diff_match_patch.Diff(DIFF_INSERT,i)];var s=this.diff_halfMatch_(t,i);if(s){var _=s[0],c=s[1],l=s[2],g=s[3],o=s[4],p=this.diff_main(_,l,h,e),d=this.diff_main(c,g,h,e);return p.concat([new diff_match_patch.Diff(DIFF_EQUAL,o)],d)}return h&&t.length>100&&i.length>100?this.diff_lineMode_(t,i,e):this.diff_bisect_(t,i,e)},diff_match_patch.prototype.diff_lineMode_=function(t,i,h){var e=this.diff_linesToChars_(t,i);t=e.chars1,i=e.chars2;var f=e.lineArray,n=this.diff_main(t,i,!1,h);this.diff_charsToLines_(n,f),this.diff_cleanupSemantic(n),n.push(new diff_match_patch.Diff(DIFF_EQUAL,""));for(var a=0,r=0,s=0,_="",c="";a<n.length;){switch(n[a][0]){case DIFF_INSERT:s++,c+=n[a][1];break;case DIFF_DELETE:r++,_+=n[a][1];break;case DIFF_EQUAL:if(r>=1&&s>=1){n.splice(a-r-s,r+s),a=a-r-s;for(var l=this.diff_main(_,c,!1,h),g=l.length-1;g>=0;g--)n.splice(a,0,l[g]);a+=l.length}s=0,r=0,_="",c=""}a++}return n.pop(),n},diff_match_patch.prototype.diff_bisect_=function(t,i,h){for(var e=t.length,f=i.length,n=Math.ceil((e+f)/2),a=n,r=2*n,s=new Array(r),_=new Array(r),c=0;c<r;c++)s[c]=-1,_[c]=-1;s[a+1]=0,_[a+1]=0;for(var l=e-f,g=l%2!=0,o=0,p=0,d=0,u=0,m=0;m<n&&!((new Date).getTime()>h);m++){for(var F=-m+o;F<=m-p;F+=2){for(var D=a+F,E=(L=F==-m||F!=m&&s[D-1]<s[D+1]?s[D+1]:s[D-1]+1)-F;L<e&&E<f&&t.charAt(L)==i.charAt(E);)L++,E++;if(s[D]=L,L>e)p+=2;else if(E>f)o+=2;else if(g){if((v=a+l-F)>=0&&v<r&&-1!=_[v])if(L>=(b=e-_[v]))return this.diff_bisectSplit_(t,i,L,E,h)}}for(var I=-m+d;I<=m-u;I+=2){for(var b,v=a+I,w=(b=I==-m||I!=m&&_[v-1]<_[v+1]?_[v+1]:_[v-1]+1)-I;b<e&&w<f&&t.charAt(e-b-1)==i.charAt(f-w-1);)b++,w++;if(_[v]=b,b>e)u+=2;else if(w>f)d+=2;else if(!g){if((D=a+l-I)>=0&&D<r&&-1!=s[D]){var L;E=a+(L=s[D])-D;if(L>=(b=e-b))return this.diff_bisectSplit_(t,i,L,E,h)}}}}return[new diff_match_patch.Diff(DIFF_DELETE,t),new diff_match_patch.Diff(DIFF_INSERT,i)]},diff_match_patch.prototype.diff_bisectSplit_=function(t,i,h,e,f){var n=t.substring(0,h),a=i.substring(0,e),r=t.substring(h),s=i.substring(e),_=this.diff_main(n,a,!1,f),c=this.diff_main(r,s,!1,f);return _.concat(c)},diff_match_patch.prototype.diff_linesToChars_=function(t,i){var h=[],e={};function f(t){for(var i="",f=0,a=-1,r=h.length;a<t.length-1;){-1==(a=t.indexOf("\n",f))&&(a=t.length-1);var s=t.substring(f,a+1);(e.hasOwnProperty?e.hasOwnProperty(s):void 0!==e[s])?i+=String.fromCharCode(e[s]):(r==n&&(s=t.substring(f),a=t.length),i+=String.fromCharCode(r),e[s]=r,h[r++]=s),f=a+1}return i}h[0]="";var n=4e4,a=f(t);return n=65535,{chars1:a,chars2:f(i),lineArray:h}},diff_match_patch.prototype.diff_charsToLines_=function(t,i){for(var h=0;h<t.length;h++){for(var e=t[h][1],f=[],n=0;n<e.length;n++)f[n]=i[e.charCodeAt(n)];t[h][1]=f.join("")}},diff_match_patch.prototype.diff_commonPrefix=function(t,i){if(!t||!i||t.charAt(0)!=i.charAt(0))return 0;for(var h=0,e=Math.min(t.length,i.length),f=e,n=0;h<f;)t.substring(n,f)==i.substring(n,f)?n=h=f:e=f,f=Math.floor((e-h)/2+h);return f},diff_match_patch.prototype.diff_commonSuffix=function(t,i){if(!t||!i||t.charAt(t.length-1)!=i.charAt(i.length-1))return 0;for(var h=0,e=Math.min(t.length,i.length),f=e,n=0;h<f;)t.substring(t.length-f,t.length-n)==i.substring(i.length-f,i.length-n)?n=h=f:e=f,f=Math.floor((e-h)/2+h);return f},diff_match_patch.prototype.diff_commonOverlap_=function(t,i){var h=t.length,e=i.length;if(0==h||0==e)return 0;h>e?t=t.substring(h-e):h<e&&(i=i.substring(0,h));var f=Math.min(h,e);if(t==i)return f;for(var n=0,a=1;;){var r=t.substring(f-a),s=i.indexOf(r);if(-1==s)return n;a+=s,0!=s&&t.substring(f-a)!=i.substring(0,a)||(n=a,a++)}},diff_match_patch.prototype.diff_halfMatch_=function(t,i){if(this.Diff_Timeout<=0)return null;var h=t.length>i.length?t:i,e=t.length>i.length?i:t;if(h.length<4||2*e.length<h.length)return null;var f=this;function n(t,i,h){for(var e,n,a,r,s=t.substring(h,h+Math.floor(t.length/4)),_=-1,c="";-1!=(_=i.indexOf(s,_+1));){var l=f.diff_commonPrefix(t.substring(h),i.substring(_)),g=f.diff_commonSuffix(t.substring(0,h),i.substring(0,_));c.length<g+l&&(c=i.substring(_-g,_)+i.substring(_,_+l),e=t.substring(0,h-g),n=t.substring(h+l),a=i.substring(0,_-g),r=i.substring(_+l))}return 2*c.length>=t.length?[e,n,a,r,c]:null}var a,r,s,_,c,l=n(h,e,Math.ceil(h.length/4)),g=n(h,e,Math.ceil(h.length/2));return l||g?(a=g?l&&l[4].length>g[4].length?l:g:l,t.length>i.length?(r=a[0],s=a[1],_=a[2],c=a[3]):(_=a[0],c=a[1],r=a[2],s=a[3]),[r,s,_,c,a[4]]):null},diff_match_patch.prototype.diff_cleanupSemantic=function(t){for(var i=!1,h=[],e=0,f=null,n=0,a=0,r=0,s=0,_=0;n<t.length;)t[n][0]==DIFF_EQUAL?(h[e++]=n,a=s,r=_,s=0,_=0,f=t[n][1]):(t[n][0]==DIFF_INSERT?s+=t[n][1].length:_+=t[n][1].length,f&&f.length<=Math.max(a,r)&&f.length<=Math.max(s,_)&&(t.splice(h[e-1],0,new diff_match_patch.Diff(DIFF_DELETE,f)),t[h[e-1]+1][0]=DIFF_INSERT,e--,n=--e>0?h[e-1]:-1,a=0,r=0,s=0,_=0,f=null,i=!0)),n++;for(i&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),n=1;n<t.length;){if(t[n-1][0]==DIFF_DELETE&&t[n][0]==DIFF_INSERT){var c=t[n-1][1],l=t[n][1],g=this.diff_commonOverlap_(c,l),o=this.diff_commonOverlap_(l,c);g>=o?(g>=c.length/2||g>=l.length/2)&&(t.splice(n,0,new diff_match_patch.Diff(DIFF_EQUAL,l.substring(0,g))),t[n-1][1]=c.substring(0,c.length-g),t[n+1][1]=l.substring(g),n++):(o>=c.length/2||o>=l.length/2)&&(t.splice(n,0,new diff_match_patch.Diff(DIFF_EQUAL,c.substring(0,o))),t[n-1][0]=DIFF_INSERT,t[n-1][1]=l.substring(0,l.length-o),t[n+1][0]=DIFF_DELETE,t[n+1][1]=c.substring(o),n++),n++}n++}},diff_match_patch.prototype.diff_cleanupSemanticLossless=function(t){function i(t,i){if(!t||!i)return 6;var h=t.charAt(t.length-1),e=i.charAt(0),f=h.match(diff_match_patch.nonAlphaNumericRegex_),n=e.match(diff_match_patch.nonAlphaNumericRegex_),a=f&&h.match(diff_match_patch.whitespaceRegex_),r=n&&e.match(diff_match_patch.whitespaceRegex_),s=a&&h.match(diff_match_patch.linebreakRegex_),_=r&&e.match(diff_match_patch.linebreakRegex_),c=s&&t.match(diff_match_patch.blanklineEndRegex_),l=_&&i.match(diff_match_patch.blanklineStartRegex_);return c||l?5:s||_?4:f&&!a&&r?3:a||r?2:f||n?1:0}for(var h=1;h<t.length-1;){if(t[h-1][0]==DIFF_EQUAL&&t[h+1][0]==DIFF_EQUAL){var e=t[h-1][1],f=t[h][1],n=t[h+1][1],a=this.diff_commonSuffix(e,f);if(a){var r=f.substring(f.length-a);e=e.substring(0,e.length-a),f=r+f.substring(0,f.length-a),n=r+n}for(var s=e,_=f,c=n,l=i(e,f)+i(f,n);f.charAt(0)===n.charAt(0);){e+=f.charAt(0),f=f.substring(1)+n.charAt(0),n=n.substring(1);var g=i(e,f)+i(f,n);g>=l&&(l=g,s=e,_=f,c=n)}t[h-1][1]!=s&&(s?t[h-1][1]=s:(t.splice(h-1,1),h--),t[h][1]=_,c?t[h+1][1]=c:(t.splice(h+1,1),h--))}h++}},diff_match_patch.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,diff_match_patch.whitespaceRegex_=/\s/,diff_match_patch.linebreakRegex_=/[\r\n]/,diff_match_patch.blanklineEndRegex_=/\n\r?\n$/,diff_match_patch.blanklineStartRegex_=/^\r?\n\r?\n/,diff_match_patch.prototype.diff_cleanupEfficiency=function(t){for(var i=!1,h=[],e=0,f=null,n=0,a=!1,r=!1,s=!1,_=!1;n<t.length;)t[n][0]==DIFF_EQUAL?(t[n][1].length<this.Diff_EditCost&&(s||_)?(h[e++]=n,a=s,r=_,f=t[n][1]):(e=0,f=null),s=_=!1):(t[n][0]==DIFF_DELETE?_=!0:s=!0,f&&(a&&r&&s&&_||f.length<this.Diff_EditCost/2&&a+r+s+_==3)&&(t.splice(h[e-1],0,new diff_match_patch.Diff(DIFF_DELETE,f)),t[h[e-1]+1][0]=DIFF_INSERT,e--,f=null,a&&r?(s=_=!0,e=0):(n=--e>0?h[e-1]:-1,s=_=!1),i=!0)),n++;i&&this.diff_cleanupMerge(t)},diff_match_patch.prototype.diff_cleanupMerge=function(t){t.push(new diff_match_patch.Diff(DIFF_EQUAL,""));for(var i,h=0,e=0,f=0,n="",a="";h<t.length;)switch(t[h][0]){case DIFF_INSERT:f++,a+=t[h][1],h++;break;case DIFF_DELETE:e++,n+=t[h][1],h++;break;case DIFF_EQUAL:e+f>1?(0!==e&&0!==f&&(0!==(i=this.diff_commonPrefix(a,n))&&(h-e-f>0&&t[h-e-f-1][0]==DIFF_EQUAL?t[h-e-f-1][1]+=a.substring(0,i):(t.splice(0,0,new diff_match_patch.Diff(DIFF_EQUAL,a.substring(0,i))),h++),a=a.substring(i),n=n.substring(i)),0!==(i=this.diff_commonSuffix(a,n))&&(t[h][1]=a.substring(a.length-i)+t[h][1],a=a.substring(0,a.length-i),n=n.substring(0,n.length-i))),h-=e+f,t.splice(h,e+f),n.length&&(t.splice(h,0,new diff_match_patch.Diff(DIFF_DELETE,n)),h++),a.length&&(t.splice(h,0,new diff_match_patch.Diff(DIFF_INSERT,a)),h++),h++):0!==h&&t[h-1][0]==DIFF_EQUAL?(t[h-1][1]+=t[h][1],t.splice(h,1)):h++,f=0,e=0,n="",a=""}""===t[t.length-1][1]&&t.pop();var r=!1;for(h=1;h<t.length-1;)t[h-1][0]==DIFF_EQUAL&&t[h+1][0]==DIFF_EQUAL&&(t[h][1].substring(t[h][1].length-t[h-1][1].length)==t[h-1][1]?(t[h][1]=t[h-1][1]+t[h][1].substring(0,t[h][1].length-t[h-1][1].length),t[h+1][1]=t[h-1][1]+t[h+1][1],t.splice(h-1,1),r=!0):t[h][1].substring(0,t[h+1][1].length)==t[h+1][1]&&(t[h-1][1]+=t[h+1][1],t[h][1]=t[h][1].substring(t[h+1][1].length)+t[h+1][1],t.splice(h+1,1),r=!0)),h++;r&&this.diff_cleanupMerge(t)},diff_match_patch.prototype.diff_xIndex=function(t,i){var h,e=0,f=0,n=0,a=0;for(h=0;h<t.length&&(t[h][0]!==DIFF_INSERT&&(e+=t[h][1].length),t[h][0]!==DIFF_DELETE&&(f+=t[h][1].length),!(e>i));h++)n=e,a=f;return t.length!=h&&t[h][0]===DIFF_DELETE?a:a+(i-n)},diff_match_patch.prototype.diff_prettyHtml=function(t){for(var i=[],h=/&/g,e=/</g,f=/>/g,n=/\n/g,a=0;a<t.length;a++){var r=t[a][0],s=t[a][1].replace(h,"&amp;").replace(e,"&lt;").replace(f,"&gt;").replace(n,"&para;<br>");switch(r){case DIFF_INSERT:i[a]='<ins style="background:#e6ffe6;">'+s+"</ins>";break;case DIFF_DELETE:i[a]='<del style="background:#ffe6e6;">'+s+"</del>";break;case DIFF_EQUAL:i[a]="<span>"+s+"</span>"}}return i.join("")},diff_match_patch.prototype.diff_text1=function(t){for(var i=[],h=0;h<t.length;h++)t[h][0]!==DIFF_INSERT&&(i[h]=t[h][1]);return i.join("")},diff_match_patch.prototype.diff_text2=function(t){for(var i=[],h=0;h<t.length;h++)t[h][0]!==DIFF_DELETE&&(i[h]=t[h][1]);return i.join("")},diff_match_patch.prototype.diff_levenshtein=function(t){for(var i=0,h=0,e=0,f=0;f<t.length;f++){var n=t[f][0],a=t[f][1];switch(n){case DIFF_INSERT:h+=a.length;break;case DIFF_DELETE:e+=a.length;break;case DIFF_EQUAL:i+=Math.max(h,e),h=0,e=0}}return i+=Math.max(h,e)},diff_match_patch.prototype.diff_toDelta=function(t){for(var i=[],h=0;h<t.length;h++)switch(t[h][0]){case DIFF_INSERT:i[h]="+"+encodeURI(t[h][1]);break;case DIFF_DELETE:i[h]="-"+t[h][1].length;break;case DIFF_EQUAL:i[h]="="+t[h][1].length}return i.join("\t").replace(/%20/g," ")},diff_match_patch.prototype.diff_fromDelta=function(t,i){for(var h=[],e=0,f=0,n=i.split(/\t/g),a=0;a<n.length;a++){var r=n[a].substring(1);switch(n[a].charAt(0)){case"+":try{h[e++]=new diff_match_patch.Diff(DIFF_INSERT,decodeURI(r))}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+r)}break;case"-":case"=":var s=parseInt(r,10);if(isNaN(s)||s<0)throw new Error("Invalid number in diff_fromDelta: "+r);var _=t.substring(f,f+=s);"="==n[a].charAt(0)?h[e++]=new diff_match_patch.Diff(DIFF_EQUAL,_):h[e++]=new diff_match_patch.Diff(DIFF_DELETE,_);break;default:if(n[a])throw new Error("Invalid diff operation in diff_fromDelta: "+n[a])}}if(f!=t.length)throw new Error("Delta length ("+f+") does not equal source text length ("+t.length+").");return h},diff_match_patch.prototype.match_main=function(t,i,h){if(null==t||null==i||null==h)throw new Error("Null input. (match_main)");return h=Math.max(0,Math.min(h,t.length)),t==i?0:t.length?t.substring(h,h+i.length)==i?h:this.match_bitap_(t,i,h):-1},diff_match_patch.prototype.match_bitap_=function(t,i,h){if(i.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var e=this.match_alphabet_(i),f=this;function n(t,e){var n=t/i.length,a=Math.abs(h-e);return f.Match_Distance?n+a/f.Match_Distance:a?1:n}var a=this.Match_Threshold,r=t.indexOf(i,h);-1!=r&&(a=Math.min(n(0,r),a),-1!=(r=t.lastIndexOf(i,h+i.length))&&(a=Math.min(n(0,r),a)));var s,_,c=1<<i.length-1;r=-1;for(var l,g=i.length+t.length,o=0;o<i.length;o++){for(s=0,_=g;s<_;)n(o,h+_)<=a?s=_:g=_,_=Math.floor((g-s)/2+s);g=_;var p=Math.max(1,h-_+1),d=Math.min(h+_,t.length)+i.length,u=Array(d+2);u[d+1]=(1<<o)-1;for(var m=d;m>=p;m--){var F=e[t.charAt(m-1)];if(u[m]=0===o?(u[m+1]<<1|1)&F:(u[m+1]<<1|1)&F|(l[m+1]|l[m])<<1|1|l[m+1],u[m]&c){var D=n(o,m-1);if(D<=a){if(a=D,!((r=m-1)>h))break;p=Math.max(1,2*h-r)}}}if(n(o+1,h)>a)break;l=u}return r},diff_match_patch.prototype.match_alphabet_=function(t){for(var i={},h=0;h<t.length;h++)i[t.charAt(h)]=0;for(h=0;h<t.length;h++)i[t.charAt(h)]|=1<<t.length-h-1;return i},diff_match_patch.prototype.patch_addContext_=function(t,i){if(0!=i.length){if(null===t.start2)throw Error("patch not initialized");for(var h=i.substring(t.start2,t.start2+t.length1),e=0;i.indexOf(h)!=i.lastIndexOf(h)&&h.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)e+=this.Patch_Margin,h=i.substring(t.start2-e,t.start2+t.length1+e);e+=this.Patch_Margin;var f=i.substring(t.start2-e,t.start2);f&&t.diffs.unshift(new diff_match_patch.Diff(DIFF_EQUAL,f));var n=i.substring(t.start2+t.length1,t.start2+t.length1+e);n&&t.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL,n)),t.start1-=f.length,t.start2-=f.length,t.length1+=f.length+n.length,t.length2+=f.length+n.length}},diff_match_patch.prototype.patch_make=function(t,i,h){var e,f;if("string"==typeof t&&"string"==typeof i&&void 0===h)e=t,(f=this.diff_main(e,i,!0)).length>2&&(this.diff_cleanupSemantic(f),this.diff_cleanupEfficiency(f));else if(t&&"object"==typeof t&&void 0===i&&void 0===h)f=t,e=this.diff_text1(f);else if("string"==typeof t&&i&&"object"==typeof i&&void 0===h)e=t,f=i;else{if("string"!=typeof t||"string"!=typeof i||!h||"object"!=typeof h)throw new Error("Unknown call format to patch_make.");e=t,f=h}if(0===f.length)return[];for(var n=[],a=new diff_match_patch.patch_obj,r=0,s=0,_=0,c=e,l=e,g=0;g<f.length;g++){var o=f[g][0],p=f[g][1];switch(r||o===DIFF_EQUAL||(a.start1=s,a.start2=_),o){case DIFF_INSERT:a.diffs[r++]=f[g],a.length2+=p.length,l=l.substring(0,_)+p+l.substring(_);break;case DIFF_DELETE:a.length1+=p.length,a.diffs[r++]=f[g],l=l.substring(0,_)+l.substring(_+p.length);break;case DIFF_EQUAL:p.length<=2*this.Patch_Margin&&r&&f.length!=g+1?(a.diffs[r++]=f[g],a.length1+=p.length,a.length2+=p.length):p.length>=2*this.Patch_Margin&&r&&(this.patch_addContext_(a,c),n.push(a),a=new diff_match_patch.patch_obj,r=0,c=l,s=_)}o!==DIFF_INSERT&&(s+=p.length),o!==DIFF_DELETE&&(_+=p.length)}return r&&(this.patch_addContext_(a,c),n.push(a)),n},diff_match_patch.prototype.patch_deepCopy=function(t){for(var i=[],h=0;h<t.length;h++){var e=t[h],f=new diff_match_patch.patch_obj;f.diffs=[];for(var n=0;n<e.diffs.length;n++)f.diffs[n]=new diff_match_patch.Diff(e.diffs[n][0],e.diffs[n][1]);f.start1=e.start1,f.start2=e.start2,f.length1=e.length1,f.length2=e.length2,i[h]=f}return i},diff_match_patch.prototype.patch_apply=function(t,i){if(0==t.length)return[i,[]];t=this.patch_deepCopy(t);var h=this.patch_addPadding(t);i=h+i+h,this.patch_splitMax(t);for(var e=0,f=[],n=0;n<t.length;n++){var a,r,s=t[n].start2+e,_=this.diff_text1(t[n].diffs),c=-1;if(_.length>this.Match_MaxBits?-1!=(a=this.match_main(i,_.substring(0,this.Match_MaxBits),s))&&(-1==(c=this.match_main(i,_.substring(_.length-this.Match_MaxBits),s+_.length-this.Match_MaxBits))||a>=c)&&(a=-1):a=this.match_main(i,_,s),-1==a)f[n]=!1,e-=t[n].length2-t[n].length1;else if(f[n]=!0,e=a-s,_==(r=-1==c?i.substring(a,a+_.length):i.substring(a,c+this.Match_MaxBits)))i=i.substring(0,a)+this.diff_text2(t[n].diffs)+i.substring(a+_.length);else{var l=this.diff_main(_,r,!1);if(_.length>this.Match_MaxBits&&this.diff_levenshtein(l)/_.length>this.Patch_DeleteThreshold)f[n]=!1;else{this.diff_cleanupSemanticLossless(l);for(var g,o=0,p=0;p<t[n].diffs.length;p++){var d=t[n].diffs[p];d[0]!==DIFF_EQUAL&&(g=this.diff_xIndex(l,o)),d[0]===DIFF_INSERT?i=i.substring(0,a+g)+d[1]+i.substring(a+g):d[0]===DIFF_DELETE&&(i=i.substring(0,a+g)+i.substring(a+this.diff_xIndex(l,o+d[1].length))),d[0]!==DIFF_DELETE&&(o+=d[1].length)}}}}return[i=i.substring(h.length,i.length-h.length),f]},diff_match_patch.prototype.patch_addPadding=function(t){for(var i=this.Patch_Margin,h="",e=1;e<=i;e++)h+=String.fromCharCode(e);for(e=0;e<t.length;e++)t[e].start1+=i,t[e].start2+=i;var f=t[0],n=f.diffs;if(0==n.length||n[0][0]!=DIFF_EQUAL)n.unshift(new diff_match_patch.Diff(DIFF_EQUAL,h)),f.start1-=i,f.start2-=i,f.length1+=i,f.length2+=i;else if(i>n[0][1].length){var a=i-n[0][1].length;n[0][1]=h.substring(n[0][1].length)+n[0][1],f.start1-=a,f.start2-=a,f.length1+=a,f.length2+=a}if(0==(n=(f=t[t.length-1]).diffs).length||n[n.length-1][0]!=DIFF_EQUAL)n.push(new diff_match_patch.Diff(DIFF_EQUAL,h)),f.length1+=i,f.length2+=i;else if(i>n[n.length-1][1].length){a=i-n[n.length-1][1].length;n[n.length-1][1]+=h.substring(0,a),f.length1+=a,f.length2+=a}return h},diff_match_patch.prototype.patch_splitMax=function(t){for(var i=this.Match_MaxBits,h=0;h<t.length;h++)if(!(t[h].length1<=i)){var e=t[h];t.splice(h--,1);for(var f=e.start1,n=e.start2,a="";0!==e.diffs.length;){var r=new diff_match_patch.patch_obj,s=!0;for(r.start1=f-a.length,r.start2=n-a.length,""!==a&&(r.length1=r.length2=a.length,r.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL,a)));0!==e.diffs.length&&r.length1<i-this.Patch_Margin;){var _=e.diffs[0][0],c=e.diffs[0][1];_===DIFF_INSERT?(r.length2+=c.length,n+=c.length,r.diffs.push(e.diffs.shift()),s=!1):_===DIFF_DELETE&&1==r.diffs.length&&r.diffs[0][0]==DIFF_EQUAL&&c.length>2*i?(r.length1+=c.length,f+=c.length,s=!1,r.diffs.push(new diff_match_patch.Diff(_,c)),e.diffs.shift()):(c=c.substring(0,i-r.length1-this.Patch_Margin),r.length1+=c.length,f+=c.length,_===DIFF_EQUAL?(r.length2+=c.length,n+=c.length):s=!1,r.diffs.push(new diff_match_patch.Diff(_,c)),c==e.diffs[0][1]?e.diffs.shift():e.diffs[0][1]=e.diffs[0][1].substring(c.length))}a=(a=this.diff_text2(r.diffs)).substring(a.length-this.Patch_Margin);var l=this.diff_text1(e.diffs).substring(0,this.Patch_Margin);""!==l&&(r.length1+=l.length,r.length2+=l.length,0!==r.diffs.length&&r.diffs[r.diffs.length-1][0]===DIFF_EQUAL?r.diffs[r.diffs.length-1][1]+=l:r.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL,l))),s||t.splice(++h,0,r)}}},diff_match_patch.prototype.patch_toText=function(t){for(var i=[],h=0;h<t.length;h++)i[h]=t[h];return i.join("")},diff_match_patch.prototype.patch_fromText=function(t){var i=[];if(!t)return i;for(var h=t.split("\n"),e=0,f=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;e<h.length;){var n=h[e].match(f);if(!n)throw new Error("Invalid patch string: "+h[e]);var a=new diff_match_patch.patch_obj;for(i.push(a),a.start1=parseInt(n[1],10),""===n[2]?(a.start1--,a.length1=1):"0"==n[2]?a.length1=0:(a.start1--,a.length1=parseInt(n[2],10)),a.start2=parseInt(n[3],10),""===n[4]?(a.start2--,a.length2=1):"0"==n[4]?a.length2=0:(a.start2--,a.length2=parseInt(n[4],10)),e++;e<h.length;){var r=h[e].charAt(0);try{var s=decodeURI(h[e].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+s)}if("-"==r)a.diffs.push(new diff_match_patch.Diff(DIFF_DELETE,s));else if("+"==r)a.diffs.push(new diff_match_patch.Diff(DIFF_INSERT,s));else if(" "==r)a.diffs.push(new diff_match_patch.Diff(DIFF_EQUAL,s));else{if("@"==r)break;if(""!==r)throw new Error('Invalid patch mode "'+r+'" in: '+s)}e++}}return i},diff_match_patch.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},diff_match_patch.patch_obj.prototype.toString=function(){for(var t,i=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],h=0;h<this.diffs.length;h++){switch(this.diffs[h][0]){case DIFF_INSERT:t="+";break;case DIFF_DELETE:t="-";break;case DIFF_EQUAL:t=" "}i[h+1]=t+encodeURI(this.diffs[h][1])+"\n"}return i.join("").replace(/%20/g," ")},_$diffMatchPatch_8=diff_match_patch,_$diffMatchPatch_8.diff_match_patch=diff_match_patch,_$diffMatchPatch_8.DIFF_DELETE=DIFF_DELETE,_$diffMatchPatch_8.DIFF_INSERT=DIFF_INSERT,_$diffMatchPatch_8.DIFF_EQUAL=DIFF_EQUAL;var _$json0_3={};(function(){var e,t,r;e=_$lib_28,t=_$optimizedDiff_19,r=_$diffMatchPatch_8,_$json0_3={type:e.type,diff:function(e,i){return t(e,i,r)}}}).call(this);var _$datahub_1={exports:{}};(function(){var t,n,r,e,o,s,u,i,p;function c(t,n){var r={}.hasOwnProperty;for(var e in n)r.call(n,e)&&(t[e]=n[e]);return t}t="undefined"!="object"&&null!==_$datahub_1?_$json0_3:json0,(n=r=function(t){var n=this;return null==t&&(t={}),this.opt=t,this.scope=t.scope||[],t.src&&t.src.pipe(this),this.subscriber=[],(t.subscriber||[]).map(function(t){return n.pipe.push(t)}),this}).prototype=c(Object.create(Object.prototype),{asSrc:function(t){var n=this;return null==t&&(t={}),this.src={get:t.get||function(){},opsOut:function(r){return t.opsOut(n.addon(r))||void n.addon(r)}}},asDes:function(t){return this.subscriber=[{opsIn:t.opsIn||function(){}}]},pipe:function(t){return t.src&&(console.warn("a hub is connected with multiple source. cut the previous source anyway."),t.src.cut(t)),this.subscriber.push(t),t.src=this,t},cut:function(t){var n;if(~(n=this.subscriber.indexOf(t)))return this.subscriber.splice(n,1),t.src=null},opsIn:function(t){var n,r=this;if(n=function(t,n){var r,e,o;for(r=0,e=n.length;r<e;++r)if(t[o=r]!==n[o])return;return t.slice(o+1)},this.scope&&(t=t.map(function(t){var e;return(e=c({},t)).p=n(t.p,r.scope),e})),(t=t.filter(function(t){return null!=t.p})).length)return this.subscriber.map(function(n){return n.opsIn(t)})},opsOut:function(t){var n=this;return this.scope&&t.map(function(t){return t.p=n.scope.concat(t.p)}),this.src.opsOut(t)},addon:function(t){var n,r;return n=[],r=this.get(),t.map(function(t){var e,o,s,u,i,p=[];for(e=r,o=[],s=0,u=t.p.length-1;s<u;++s)i=s,o.push(t.p[i]),null==e[t.p[i]]&&n.push(c({p:JSON.parse(JSON.stringify(o))},i===t.p.length-1&&t.si?{si:""}:{oi:{}})),p.push(e=e[t.p[i]]||{});return p}),t=n.concat(t)},get:function(){var t,n,r,e,o;for(t=this.src.get(),n=0,e=(r=this.scope).length;n<e;++n){if(o=r[n],!t)return null;t=t[o]}return t}}),(e=function(t){return null==t&&(t={}),n.call(this,t),this.asSrc({opsOut:t.opsOut||function(){},get:t.get||function(){}}),this}).prototype=c({},n.prototype),(o=function(t){return null==t&&(t={}),n.call(this,t),this.asDes({opsIn:t.opsIn}),this}).prototype=c({},n.prototype),(s=function(n){var r=this;return null==n&&(n={}),this.data={},e.call(this,c(c({},n),{opsOut:function(n){return r.data=t.type.apply(r.data,n),r.opsIn(n)},get:function(){return JSON.parse(JSON.stringify(r.data))}})),this}).prototype=c({},e.prototype),(u=function(n){var r=this;return null==n&&(n={}),o.call(this,c(c({},n),{opsIn:function(e){return r.data?t.type.apply(r.data,e):r.data=r.get()||{},n.render(e)}})),this}).prototype=c({},o.prototype),(i=function(t){var r=this;return null==t&&(t={}),this.src=t.src,this.src.pipe(this.hub=new n.des({opsIn:function(t){return r.update(t)}})),this.data=this.hub.get(),this}).prototype=c(Object.create(Object.prototype),{update:function(n){return t.type.apply(this.data,n),this.render()},render:function(){return console.log("render is not implemented")}}),p=function(t){var n;return t.prototype=Object.create(Object.prototype),n=function(){var r,e,o,s,u;for(e=[],o=0,s=arguments.length;o<s;++o)e.push(arguments[o]);return r=e,u=Reflect.construct(i,r,n),t.apply(u,r),u},Object.setPrototypeOf(n.prototype,i.prototype),n},r.src=e,r.des=o,r.mem=s,r.usr=u,r.as=p,"undefined"!="object"&&null!==_$datahub_1?_$datahub_1.exports=r:"undefined"!=typeof window&&null!==window&&(window.datahub=r)}).call(this);_$datahub_1=_$datahub_1.exports;var _$sharehub_2={exports:{}};(function(){var r,t;function n(r,t){var n={}.hasOwnProperty;for(var e in t)n.call(t,e)&&(r[e]=t[e]);return r}r="undefined"!="object"&&null!==_$sharehub_2?_$datahub_1:datahub,(t=function(t){var e=this;return null==t&&(t={}),this.evtHandler={},this.data={},this.id=t.id||"",this.create=t.create||null,r.src.call(this,n(n({},t),{opsOut:function(r){return e.data=json0.type.apply(e.data,r),e.doc.submitOp(JSON.parse(JSON.stringify(r)))},get:function(){return JSON.parse(JSON.stringify(e.data))}})),this}).prototype=n(n({},r.src.prototype),{on:function(r,t){var n;return((n=this.evtHandler)[r]||(n[r]=[])).push(t)},fire:function(r){var t,n,e,o,a,i,u,s=[];for(n=[],e=1,o=arguments.length;e<o;++e)n.push(arguments[e]);for(t=n,e=0,i=(a=this.evtHandler[r]||[]).length;e<i;++e)u=a[e],s.push(u.apply(this,t));return s},watch:function(r,t){return t||(this.data=json0.type.apply(this.data,t)),this.opsIn(JSON.parse(JSON.stringify(r)))},init:function(){var r=this;return Promise.resolve().then(function(){var t;return r.sdb=t=new sharedbWrapper({url:window.location.protocol.replace(":","")},window.location.domain),t.on("error",function(t){var n;return((n=r.evtHandler).error||(n.error=[])).length?r.fire("error",t.err):console.error(t.err)}),t.get({id:r.id,create:r.create?function(){return r.create()}:null,watch:function(){var t,n,e,o;for(n=[],e=0,o=arguments.length;e<o;++e)n.push(arguments[e]);return t=n,r.watch.apply(r,t)}})}).then(function(t){return r.doc=t,r.data=JSON.parse(JSON.stringify(r.doc.data)),{sdb:r.sdb}})}}),"undefined"!="object"&&null!==_$sharehub_2?_$sharehub_2.exports=t:"undefined"!=typeof window&&null!==window&&(window.sharehub=t)}).call(this);_$sharehub_2=_$sharehub_2.exports;return _$sharehub_2});
