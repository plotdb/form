<div class="rounded-lg shadow mb-4"><div class="p-4"><div class="d-flex"><div class="flex-grow-1"><div class="d-flex align-items-end mb-1"><h3 class="mb-0" ld="title" contenteditable="true">問題的標題</h3><div class="flex-grow-1 d-flex"><div class="text-danger pl-2" ld="required"><span>*</span></div><div class="text-success d-none pl-2" ld="ok-hint"><i class="i-check"></i></div></div></div><p contenteditable="true">關於問題的簡單描述 ...</p></div><div ld="edit-only"><div class="ml-4"><div class="dropdown" ld="dropdown"><div class="btn btn-light dropdown-toggle" ld="shortname" data-toggle="dropdown">代稱</div><div class="dropdown-menu dropdown-menu-right shadow-sm"><div class="dropdown-header">常用範例</div><div class="dropdown-item" ld="set-shortname" data-value="統一編號">統一編號</div><div class="dropdown-item" ld="set-shortname" data-value="電話">電話</div><div class="dropdown-item" ld="set-shortname" data-value="團隊名稱">團隊名稱</div><div class="dropdown-divider"></div><div class="dropdown-header">自訂名稱</div><div class="dropdown-item px-3"><input class="form-control" ld="custom-shortname" placeholder="自訂 ..."></div></div></div></div></div></div><plug name="view"></plug><div class="text-danger py-2 d-none" ld="error-hint"></div></div><div class="border-top border-bottom" ld="edit-only"><div class="m-4"><div class="d-flex mb-1 align-items-center justify-content-between" ld-each="term"><div class="mr-2"><div class="switch switch-lg" ld="enabled"></div></div><div class="mr-2"><div class="dropdown" ld="dropdown"><div class="btn btn-light dropdown-toggle" ld="opset" data-toggle="dropdown">...</div><div class="dropdown-menu"><div class="dropdown-item" ld-each="set-opset">...</div></div></div></div><div class="mr-2"><div class="dropdown" ld="dropdown"><div class="btn btn-light dropdown-toggle" ld="op" data-toggle="dropdown">...</div><div class="dropdown-menu"><div class="dropdown-item" ld-each="set-op">...</div></div></div></div><div class="d-flex flex-grow-1" ld-scope ld="config-root"><div class="mr-2 flex-grow-1" ld-each="config"></div></div><div class="mr-2 flex-grow-1"><input class="form-control simple" ld="errmsg" t="error message" t-attr="placeholder"></div><i class="i-close text-danger clickable" ld="delete"></i></div><div class="mt-4"><div class="btn btn-link p-0" ld="add-term"><span t="add criteria"></span> ...</div></div></div></div><div class="px-4 pb-4 mt-4" ld="edit-only"><plug name="config"></plug><div class="d-flex align-items-center mt-4"><div class="mr-2"><div class="btn btn-sm btn-outline-danger" ld="delete"><i class="i-close"></i> <span t="delete"></span></div></div><div class="mr-2"><div class="btn btn-sm btn-outline-secondary" ld="clone"><i class="i-clone"></i> <span t="copy"></span></div></div><div class="flex-grow-1 justify-content-end d-flex"><div class="ml-4 d-flex align-items-center line-height-1em"><span t="public"></span><div class="switch ml-2" ld="switch" data-name="isPublic"></div></div><div class="ml-4 d-flex align-items-center line-height-1em"><span t="required"></span><div class="switch ml-2 on" ld="switch" data-name="isRequired"></div></div></div></div></div><script type="@plotdb/block">var mod;module.exports={pkg:{name:"base",version:"0.0.1",dependencies:[{url:"/assets/lib/bootstrap.native/main/dist/bootstrap-native-v4.min.js"},{url:"/assets/lib/@plotdb/suuid/main/index.bundle.min.js"},{url:"/assets/lib/@plotdb/konfig/main/index.min.js"},{url:"/assets/lib/@plotdb/form/dev/index.min.js"},{url:"/assets/lib/ldview/main/index.min.js"}],i18n:{"zh-TW":{required:"必填",copy:"複製",delete:"刪除",public:"公開","show description":"顯示描述","number for comparison":"比較用的數字","add criteria":"增加條件","error message":"錯誤訊息","invalid input":"輸入不符合要求"}}},interface:function(){return this.widget},init:function(r){var i,e,o,a,s=this;r==null&&(r={});i=r.root,e=r.pubsub,o=r.i18n;a=r.context.form;return e.on("init",function(e){var t,n;e==null&&(e={});s.widget=t=new a.widget({root:i,opsets:e.opsets,mod:mod(r,e)});o.addResourceBundles(s.widget.i18n);n={view:i.querySelector("[ld-scope][plug=view]")};return{widget:t,node:n}})}};mod=function(e,t){var n,o,a,r,s,u,d,c,l,f;e==null&&(e={});t==null&&(t={});n=e.context,o=n.BSN,a=n.ldview,r=n.suuid,s=n.form,u=n.konfig;d=e.pubsub,c=e.t,l=e.root;f=t.mod;return{render:function(){this._custom.view.render();if(f&&f.render){return f.render.apply(this,args)}},isEmpty:function(){var e,t,n,r;t=[];for(n=0,r=arguments.length;n<r;++n){t.push(arguments[n])}e=t;if(f&&f.isEmpty){return f.isEmpty.apply(this,e)}},init:function(){var i,r,n=this;i=this._meta;this._custom.view=r=new a({root:l,action:{input:{title:function(e){var t,n;t=e.node,n=e.ctx;return i.title=t.value||""},desc:function(e){var t,n;t=e.node,n=e.ctx;return i.desc=t.value||""},"custom-shortname":function(e){var t,n;t=e.node,n=e.views;i.alias=t.value||"";return n[0].render()}},click:{"set-shortname":function(e){var t,n;t=e.node,n=e.views;i.alias=t.getAttribute("data-value")||"";return n[0].render()},"custom-shortname":function(e){var t;t=e.evt;return t.stopPropagation()},"add-term":function(e){var t;t=e.views;(i.term||(i.term=[])).push(new s.term({opset:n._opsets[0]}));n.validate();return t[0].render("term")},switch:function(e){var t,n;t=e.node;n=t.getAttribute("data-name");(i.config||(i.config={}))[n]=!i.config[n];d.fire("update");return r.render()}}},init:{dropdown:function(e){var t;t=e.node;return new o.Dropdown(t)}},text:{shortname:function(){return i.alias||"設定代稱.."}},handler:{required:function(e){var t;t=e.node;return t.classList.toggle("d-none",!i.config.isRequired)},"add-term":function(e){var t;t=e.node;return t.classList.toggle("d-none",!n._opsets.length)},"ok-hint":function(e){var t;t=e.node;return t.classList.toggle("d-none",n._mode==="edit"||n._errors.length)},"error-hint":function(e){var t;t=e.node;t.classList.toggle("d-none",n._mode==="edit"||!n._errors.length);return t.textContent=n._errors.length?c(n._errors[0]||"invalid input"):""},"edit-only":function(e){var t;t=e.node;return t.classList.toggle("d-none",n._mode!=="edit")},"set-shortname":function(e){var t;t=e.node;return t.classList.toggle("active",t.getAttribute("data-value")===i.alias)},"custom-shortname":function(e){var t;t=e.node;return t.value=i.alias||""},title:function(e){var t;t=e.node;return t.value=i.title||""},desc:function(e){var t;t=e.node;return t.value=i.desc||""},switch:function(e){var t,n;t=e.node;n=t.getAttribute("data-name");return t.classList.toggle("on",!!(i.config||(i.config={}))[n])},term:{list:function(){return i.term||(i.term=[])},view:{action:{input:{errmsg:function(e){var t,n;t=e.node,n=e.ctx;return n.msg=t.value||""}},click:{enabled:function(e){var t,n;t=e.ctx,n=e.views;t.enabled=!t.enabled;return n[0].render()},delete:function(e){var t,n;t=e.ctx,n=e.views;i.term.splice(i.term.indexOf(t),1);return n[1].render("term")}},change:{attr:function(e){var t,n,r;t=e.node,n=e.ctx,r=e.views;n.opset=i.attr[t.value].opset;return r[0].render()},op:function(e){var t,n,r;t=e.node,n=e.views,r=e.ctx;r.op=s.opset.get(r.opset||"number").getOp(t.value);return n[0].render()}}},init:{dropdown:function(e){var t;t=e.node;return new o.Dropdown(t)},"config-root":function(e){var t,n,r,i;t=e.node,n=e.ctx,r=e.local;r.cfg=i=new u({root:t,config:n.op.config,name:function(e){return"config/"+e}});i.init();return i.on("change",function(e){return n.config=e})}},text:{opset:function(e){var t;t=e.ctx;return c(!t.opset?"":t.opset.name||t.opset.id)},op:function(e){var t;t=e.ctx;return c(!t.op?"":t.op.name||t.op.id)}},handler:{"config-root":function(e){var t,n,r,i,o,a,s;t=e.node,n=e.ctx,r=e.local;i=n.op.config||{};for(o in i){a=i[o];if(a.hint){a.hint=c(a.hint)}}r.cfg.config(i);if(r.cfg.view){r.cfg.view.render()}s=!!function(){var e=[];for(o in i){e.push(o)}return e}().length;t.classList.toggle("d-none",!s);return t.classList.toggle("d-flex",s)},enabled:function(e){var t,n;t=e.node,n=e.ctx;return t.classList.toggle("on",!!n.enabled)},"set-op":{list:function(e){var t;t=e.ctx;return t.opset.getOps()},action:{click:function(e){var t,n,r;t=e.data,n=e.ctx,r=e.views;n.setOp(t.id);return r[0].render()}},handler:function(e){var t,n;t=e.node,n=e.data;t.textContent=c(n.name||n.id);return t.setAttribute("data-id",n.id)}},"set-opset":{list:function(){return n._opsets},key:function(e){return e.id},action:{click:function(e){var t,n,r;t=e.data,n=e.ctx,r=e.views;if(n.opset.id===t.id){return}n.setOpset(t);return r[0].render()}},handler:function(e){var t,n;t=e.node,n=e.data;t.textContent=c(n.name||n.id);return t.setAttribute("data-id",n.id)}}}}}}});if(f&&f.init){return f.init.apply(this,args)}}}};</script></div>