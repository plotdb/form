<div><div class="form-long-answer" ld-scope plug="view"><div class="mb-2" ld="if-markdown-enabled"><div class="d-flex align-items-center"><div class="d-flex align-items-center text-sm text-muted mr-4" style="line-height:1em"><input class="mr-1" type="checkbox" ld="use-markdown"><div><span class="mr-2" t="enable markdown"></span><span>(</span><a class="mx-2" href="https://markdown.tw/" target="_blank" rel="noopener noreferrer" t="syntax"></a><span>)</span></div></div><div class="d-none" ld="if-markdown"><div class="d-flex align-items-center text-sm text-muted mr-4" style="line-height:1em"><input class="mr-1" type="checkbox" ld="toggle-preview"><div t="preview"></div></div></div></div></div><div class="position-relative"><textarea class="form-control" rows="5" ld="input-field edit-panel"></textarea><div class="w-100 bg-light rounded p-3 text-break d-none" ld="preview-panel" style="min-height:150px"></div></div></div><div plug="config"><div class="d-none flex-grow-1" ld="edit-only"><div class="text-nowrap d-flex align-items-center"><div class="mr-2" t="provide markdown option"></div><div><div class="switch ml-2" ld="switch" data-name="markdownEnabled"></div></div></div></div></div><script type="@plotdb/block">module.exports={pkg:{name:"long-answer",version:"0.0.1",extend:{name:"base",version:"0.0.1"},license:"MIT",description:"",dependencies:["https://cdnjs.cloudflare.com/ajax/libs/marked/1.2.7/marked.min.js","https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.2.6/purify.min.js"],i18n:{"zh-TW":{"input text":"輸入文字 ...","provide markdown option":"提供 Markdown 選項",preview:"預覽","enable markdown":"啟用 Markdown 語法",syntax:"語法說明"}}},init:function(n){var e,r,o,d,u,l,c,s;e=n.root,r=n.parent,o=n.context,d=n.pubsub,u=n.data;l=o.DOMPurify,c=o.marked,s=o.ldview;u=u||{};return d.fire("init",{opsets:["string","number"],mod:{isEmpty:function(n){return!(n+"").trim().length}}}).then(function(n){var e,r,o,a,i,t;n==null&&(n=[]);e=n[0],r=e.widget,o=e.node;u.config||(u.config={});a={value:"",useMarkdown:false};i={};d.on("change",function(n){import$(a,n||{});return t.get("input-field").value=a.value||""});d.on("update",function(){if(!u.config.markdownEnabled){a.useMarkdown=false}return t.render()});return t=new s({root:o.view,action:{input:{"input-field":function(n){var e;e=n.node;r.value(e.value,!e.value,true);return a.value=e.value}},click:{"use-markdown":function(n){var e;e=n.node;a.useMarkdown=u.config.markdownEnabled&&e.checked;return t.render()},"markdown-enabled":function(n){var e,r;e=n.node,r=n.evt;return u.config.markdownEnabled=!u.config.markdownEnabled},"toggle-preview":function(n){var e;e=n.node;i.preview=e.checked;return t.render()}}},handler:{"if-markdown":function(n){var e;e=n.node;return e.classList.toggle("d-none",!a.useMarkdown)},"if-markdown-enabled":function(n){var e;e=n.node;return e.classList.toggle("d-none",!u.config.markdownEnabled)},"use-markdown":function(n){var e;e=n.node;return e.checked=a.useMarkdown},"preview-panel":function(n){var e;e=n.node;e.classList.toggle("d-none",!i.preview);if(i.preview){return e.innerHTML=l.sanitize(c(a.value||""))}},"edit-panel":function(n){var e;e=n.node;return e.classList.toggle("d-none",!!i.preview)}}})})}};function import$(n,e){var r={}.hasOwnProperty;for(var o in e)if(r.call(e,o))n[o]=e[o];return n}</script></div>