<div class="rounded-lg shadow mb-4"><div class="p-4"><div class="d-flex"><div class="flex-grow-1"><div class="d-flex align-items-end mb-1"><h3 class="mb-0" ld="title" contenteditable="true">問題的標題</h3><div class="flex-grow-1 d-flex"><div class="text-danger pl-2" ld="required"><span>*</span></div><div class="text-success d-none pl-2" ld="ok-hint"><i class="i-check"></i></div></div></div><p contenteditable="true">關於問題的簡單描述 ...</p></div><div ld="edit-only"><div class="ml-4"><div class="dropdown" ld="dropdown"><div class="btn btn-light dropdown-toggle" ld="shortname" data-toggle="dropdown">代稱</div><div class="dropdown-menu dropdown-menu-right shadow-sm"><div class="dropdown-header">常用範例</div><div class="dropdown-item" ld="set-shortname" data-value="統一編號">統一編號</div><div class="dropdown-item" ld="set-shortname" data-value="電話">電話</div><div class="dropdown-item" ld="set-shortname" data-value="團隊名稱">團隊名稱</div><div class="dropdown-divider"></div><div class="dropdown-header">自訂名稱</div><div class="dropdown-item px-3"><input class="form-control" ld="custom-shortname" placeholder="自訂 ..."></div></div></div></div></div></div><plug name="view"></plug><div class="text-danger py-2 d-none" ld="error-hint"></div></div><div class="border-top border-bottom" ld="edit-only"><div class="m-4"><div class="d-flex mb-1 align-items-center justify-content-between" ld-each="term"><div class="mr-2"><div class="switch switch-lg" ld="enabled"></div></div><div class="mr-2"><div class="dropdown" ld="dropdown"><div class="btn btn-light dropdown-toggle" ld="opset" data-toggle="dropdown">...</div><div class="dropdown-menu"><div class="dropdown-item" ld-each="set-opset">...</div></div></div></div><div class="mr-2"><div class="dropdown" ld="dropdown"><div class="btn btn-light dropdown-toggle" ld="op" data-toggle="dropdown">...</div><div class="dropdown-menu"><div class="dropdown-item" ld-each="set-op">...</div></div></div></div><div class="d-flex flex-grow-1" ld-scope ld="config-root"><div class="mr-2 flex-grow-1" ld-each="config"></div></div><div class="mr-2 flex-grow-1"><input class="form-control simple" ld="errmsg" t="error message" t-attr="placeholder"></div><i class="i-close text-danger clickable" ld="delete"></i></div><div class="mt-4"><div class="btn btn-link p-0" ld="add-term"><span t="add criteria"></span> ...</div></div></div></div><div class="px-4 pb-4 mt-4" ld="edit-only"><plug name="config"></plug><div class="d-flex align-items-center mt-4"><div class="mr-2"><div class="btn btn-sm btn-outline-danger" ld="delete"><i class="i-close"></i> <span t="delete"></span></div></div><div class="mr-2"><div class="btn btn-sm btn-outline-secondary" ld="clone"><i class="i-clone"></i> <span t="copy"></span></div></div><div class="flex-grow-1 justify-content-end d-flex"><div class="ml-4 d-flex align-items-center line-height-1em"><span t="public"></span><div class="switch ml-2" ld="switch" data-name="isPublic"></div></div><div class="ml-4 d-flex align-items-center line-height-1em"><span t="required"></span><div class="switch ml-2 on" ld="switch" data-name="isRequired"></div></div></div></div></div><script type="@plotdb/block">(function(t){return t()})(function(){var t,s;t={pkg:{name:"base",version:"0.0.1",dependencies:[{url:"/assets/lib/bootstrap.native/main/bootstrap-native-v4.min.js"},{url:"/assets/lib/@plotdb/suuid/main/suuid.bundle.min.js"},{url:"/assets/lib/@plotdb/konfig/main/index.min.js"},{url:"/assets/lib/@plotdb/form/dev/index.min.js"},{url:"/assets/lib/ldview/main/index.min.js"}],i18n:{"zh-TW":{required:"必填",copy:"複製",delete:"刪除",public:"公開","show description":"顯示描述","number for comparison":"比較用的數字","add criteria":"增加條件","error message":"錯誤訊息","invalid input":"輸入不符合要求"}}},interface:function(){return this.widget},init:function(r){var i,t,o,a,u=this;r==null&&(r={});i=r.root,t=r.pubsub,o=r.i18n;a=r.context.form;return t.on("init",function(t){var e,n;t==null&&(t={});u.widget=e=new a.widget({root:i,opsets:t.opsets,mod:s(r,t)});o.addResourceBundles(u.widget.i18n);n={view:i.querySelector("[ld-scope][plug=view]")};return{widget:e,node:n}})}};s=function(t,e){var n,o,a,r,u,s,d,c,l,f;t==null&&(t={});e==null&&(e={});n=t.context,o=n.BSN,a=n.ldview,r=n.suuid,u=n.form,s=n.konfig;d=t.pubsub,c=t.t,l=t.root;f=e.mod;return{render:function(){this._custom.view.render();if(f&&f.render){return f.render.apply(this,args)}},isEmpty:function(){var t,e,n,r;e=[];for(n=0,r=arguments.length;n<r;++n){e.push(arguments[n])}t=e;if(f&&f.isEmpty){return f.isEmpty.apply(this,t)}},init:function(){var i,r,n=this;i=this._meta;this._custom.view=r=new a({root:l,action:{input:{title:function(t){var e,n;e=t.node,n=t.ctx;return i.title=e.value||""},desc:function(t){var e,n;e=t.node,n=t.ctx;return i.desc=e.value||""},"custom-shortname":function(t){var e,n;e=t.node,n=t.views;i.alias=e.value||"";return n[0].render()}},click:{"set-shortname":function(t){var e,n;e=t.node,n=t.views;i.alias=e.getAttribute("data-value")||"";return n[0].render()},"custom-shortname":function(t){var e;e=t.evt;return e.stopPropagation()},"add-term":function(t){var e;e=t.views;(i.term||(i.term=[])).push(new u.term({opset:n._opsets[0]}));n.validate();return e[0].render("term")},switch:function(t){var e,n;e=t.node;n=e.getAttribute("data-name");(i.config||(i.config={}))[n]=!i.config[n];d.fire("update");return r.render()}}},init:{dropdown:function(t){var e;e=t.node;return new o.Dropdown(e)}},text:{shortname:function(){return i.alias||"設定代稱.."}},handler:{required:function(t){var e;e=t.node;return e.classList.toggle("d-none",!i.config.isRequired)},"add-term":function(t){var e;e=t.node;return e.classList.toggle("d-none",!n._opsets.length)},"ok-hint":function(t){var e;e=t.node;return e.classList.toggle("d-none",n._mode==="edit"||n._errors.length)},"error-hint":function(t){var e;e=t.node;e.classList.toggle("d-none",n._mode==="edit"||!n._errors.length);return e.textContent=n._errors.length?c(n._errors[0]||"invalid input"):""},"edit-only":function(t){var e;e=t.node;return e.classList.toggle("d-none",n._mode!=="edit")},"set-shortname":function(t){var e;e=t.node;return e.classList.toggle("active",e.getAttribute("data-value")===i.alias)},"custom-shortname":function(t){var e;e=t.node;return e.value=i.alias||""},title:function(t){var e;e=t.node;return e.value=i.title||""},desc:function(t){var e;e=t.node;return e.value=i.desc||""},switch:function(t){var e,n;e=t.node;n=e.getAttribute("data-name");return e.classList.toggle("on",!!(i.config||(i.config={}))[n])},term:{list:function(){return i.term||(i.term=[])},view:{action:{input:{errmsg:function(t){var e,n;e=t.node,n=t.ctx;return n.msg=e.value||""}},click:{enabled:function(t){var e,n;e=t.ctx,n=t.views;e.enabled=!e.enabled;return n[0].render()},delete:function(t){var e,n;e=t.ctx,n=t.views;i.term.splice(i.term.indexOf(e),1);return n[1].render("term")}},change:{attr:function(t){var e,n,r;e=t.node,n=t.ctx,r=t.views;n.opset=i.attr[e.value].opset;return r[0].render()},op:function(t){var e,n,r;e=t.node,n=t.views,r=t.ctx;r.op=u.opset.get(r.opset||"number").getOp(e.value);return n[0].render()}}},init:{dropdown:function(t){var e;e=t.node;return new o.Dropdown(e)},"config-root":function(t){var e,n,r,i;e=t.node,n=t.ctx,r=t.local;r.cfg=i=new s({root:e,config:n.op.config,name:function(t){return"config/"+t}});i.init();return i.on("change",function(t){return n.config=t})}},text:{opset:function(t){var e;e=t.ctx;return c(!e.opset?"":e.opset.name||e.opset.id)},op:function(t){var e;e=t.ctx;return c(!e.op?"":e.op.name||e.op.id)}},handler:{"config-root":function(t){var e,n,r,i,o,a,u;e=t.node,n=t.ctx,r=t.local;i=n.op.config||{};for(o in i){a=i[o];if(a.hint){a.hint=c(a.hint)}}r.cfg.config(i);if(r.cfg.view){r.cfg.view.render()}u=!!function(){var t=[];for(o in i){t.push(o)}return t}().length;e.classList.toggle("d-none",!u);return e.classList.toggle("d-flex",u)},enabled:function(t){var e,n;e=t.node,n=t.ctx;return e.classList.toggle("on",!!n.enabled)},"set-op":{list:function(t){var e;e=t.ctx;return e.opset.getOps()},action:{click:function(t){var e,n,r;e=t.data,n=t.ctx,r=t.views;n.setOp(e.id);return r[0].render()}},handler:function(t){var e,n;e=t.node,n=t.data;e.textContent=c(n.name||n.id);return e.setAttribute("data-id",n.id)}},"set-opset":{list:function(){return n._opsets},key:function(t){return t.id},action:{click:function(t){var e,n,r;e=t.data,n=t.ctx,r=t.views;if(n.opset.id===e.id){return}n.setOpset(e);return r[0].render()}},handler:function(t){var e,n;e=t.node,n=t.data;e.textContent=c(n.name||n.id);return e.setAttribute("data-id",n.id)}}}}}}});if(f&&f.init){return f.init.apply(this,args)}}}};return t});</script></div>