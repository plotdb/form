<div><div class="form-long-answer" ld-scope plug="view"><div class="position-relative"><textarea class="form-control" rows="5" ld="input-field edit-panel"></textarea><div class="w-100 bg-light rounded p-3 text-break d-none" ld="preview-panel" style="min-height:200px"></div></div><div class="mt-2" ld="if-markdown-enabled"><div class="d-flex align-items-center"><div class="d-flex align-items-center text-sm text-muted mr-4"><input class="mr-1" type="checkbox" ld="use-markdown"><div>啟用 Markdown 語法 ( <a href="https://markdown.tw/" target="_blank" rel="noopener noreferrer">語法說明</a> )</div></div><div class="d-none" ld="if-markdown"><div class="d-flex align-items-center text-sm text-muted mr-4"><input class="mr-1" type="checkbox" ld="toggle-preview"><div>預覽</div></div></div></div></div><div class="d-none flex-grow-1 mt-4" ld="edit-only"><div class="text-nowrap d-flex align-items-center"><div class="mr-2">顯示並提供 Markdown 選項給填表者</div><div><div class="switch ml-2" ld="markdown-enabled"></div></div></div></div></div><script type="@plotdb/block">({pkg:{author:"zbryikt",name:"@plotdb/long-answer",version:"0.0.1",extend:"@plotdb/formbase@0.0.1",license:"MIT",description:"",dependencies:["https://cdnjs.cloudflare.com/ajax/libs/marked/1.2.7/marked.min.js","https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.2.6/purify.min.js"]},update:function(){},render:function(){return this.view.render()},init:function(e){var n,o,r,t,i,a,d=this;n=e.root,o=e.mode,r=e.context;console.log("> long-answer",n);o="edit";this.block={};t=r.DOMPurify;i=r.marked;return this.view=a=new ldView({root:n.querySelector("[plug=view]"),action:{input:{"use-markdown":function(e){var n,o;n=e.node;((o=d.block).value||(o.value={})).useMarkdown=n.checked;d.update();return a.render()},"input-field":function(e){var n,o;n=e.node;((o=d.block).value||(o.value={})).content=n.value;return d.update()},"toggle-preview":function(e){var n;n=e.node;d.preview=!!n.checked;return a.render()}},click:{"markdown-enabled":function(e){var n,o,r;n=e.node,o=e.evt;((r=d.block).config||(r.config={})).markdownEnabled=!((r=d.block).config||(r.config={})).markdownEnabled;d.update();return d.render()}}},handler:{"edit-only":function(e){var n;n=e.node;return n.classList.toggle("d-none",o!=="edit")},"input-field":function(e){var n,o;n=e.node;return n.value=((o=d.block).value||(o.value={})).content||""},"markdown-enabled":function(e){var n,o;n=e.node;return n.classList.toggle("on",!!((o=d.block).config||(o.config={})).markdownEnabled)},"preview-panel":function(e){var n,o;n=e.node;n.classList.toggle("d-none",!d.preview);if(d.preview){return n.innerHTML=t.sanitize(i(((o=d.block).value||(o.value={})).content||""))}},"edit-panel":function(e){var n;n=e.node;return n.classList.toggle("d-none",!!d.preview)},"if-markdown":function(e){var n,o;n=e.node;return n.classList.toggle("d-none",!((o=d.block).value||(o.value={})).useMarkdown)},"if-markdown-enabled":function(e){var n,o;n=e.node;return n.classList.toggle("d-none",!((o=d.block).config||(o.config={})).markdownEnabled)}}})}});</script></div>