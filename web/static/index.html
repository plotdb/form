<!DOCTYPE html><html><head><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,700|Roboto+Mono"><link rel="stylesheet" type="text/css" href="/assets/lib/bootstrap/main/dist/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="/assets/lib/@loadingio/bootstrap.ext/main/index.min.css"><link rel="stylesheet" type="text/css" href="/assets/lib/ldcover/main/index.min.css"><link rel="stylesheet" type="text/css" href="/assets/lib/ldiconfont/main/ldif.min.css"><link rel="stylesheet" type="text/css" href="css/index.css"><style type="text/css">html,body{font-size:24px}</style></head><body><div class="w-1024 rwd mx-auto my-5"><div ld-each="widget"></div><div ld="form"></div><hr><div class="d-flex g-2 align-items-center"><div class="btn btn-outline-secondary" ld="validate">Validate</div><div class="btn btn-outline-secondary" ld="dump">Dump</div><div class="btn btn-outline-secondary" ld="order">Order</div><div class="flex-grow-1"><div class="mb-0 text-sm">Progress</div><div class="progress"><div class="progress-bar progress-bar-striped progress-bar-animated" ld="progress-bar"></div></div></div></div></div><script type="text/javascript" src="/assets/lib/bootstrap.native/main/dist/bootstrap-native.min.js" defer></script><script type="text/javascript" src="/assets/lib/i18next/main/dist/umd/i18next.min.js" defer></script><script type="text/javascript" src="/assets/lib/@loadingio/debounce.js/main/index.min.js" defer></script><script type="text/javascript" src="/assets/lib/@loadingio/ldquery/main/index.min.js" defer></script><script type="text/javascript" src="/assets/lib/proxise/main/index.min.js" defer></script><script type="text/javascript" src="/assets/lib/ldcover/main/index.min.js" defer></script><script type="text/javascript" src="/assets/lib/ldview/main/index.min.js" defer></script><script type="text/javascript" src="/assets/lib/@plotdb/datadom/main/index.min.js" defer></script><script type="text/javascript" src="/assets/lib/@plotdb/semver/main/index.min.js" defer></script><script type="text/javascript" src="/assets/lib/@plotdb/csscope/main/index.min.js" defer></script><script type="text/javascript" src="/assets/lib/@plotdb/rescope/main/index.min.js" defer></script><script type="text/javascript" src="/assets/lib/@plotdb/block/main/index.min.js" defer></script><script type="text/javascript" src="/assets/lib/@plotdb/form/dev/index.min.js" defer></script><script type="module">var ref$;form.controller=function(r){r==null&&(r={});this._={list:[],node:null,opt:r,formmgr:r.formmgr,root:r.root,widget:{bid:r.widget,meta:r.meta},mgr:r.manager};return this};form.controller.prototype=(ref$=Object.create(Object.prototype),ref$.findScrollableParent=function(r){var e,t,n;while(r=r.parentNode){if(!(r instanceof HTMLElement)){break}e=(t=getComputedStyle(r).overflowY)==="auto"||t==="scroll"||t==="overlay";n=r.scrollHeight>r.clientHeight;if(e&&n){return r}}return document.scrollingElement},ref$.init=function(){var r,n=this;if(!(r=this._.widget.bid)){return Promise.resolve()}r=typeof r==="string"?{name:r}:r;return mgr.from(r,{root:this._.root,data:{}}).then(function(r){var e,t;e=n._.widget;e.itf=t=r["interface"];e.instance=r.instance;return Promise.resolve(t.deserialize(n._.widget.meta,{init:true})).then(function(){if(n._.formmgr){return n._.formmgr.add({path:"_",widget:n._.widget.itf})}else{return n._.formmgr=(t.manager()||[])[0]}})})},ref$.formmgr=function(){return this._.formmgr},ref$.check=debounce(function(r){var e,t,n,f,l=this;e=r!=null?r:{},t=(n=e.init)!=null?n:false,f=(n=e.force)!=null?n:false;return Promise.resolve().then(function(){if(f){return l._.formmgr.check(null,{now:true,force:true})}else if(t){return l._.formmgr.check(null,{now:true,skipEmpty:true})}}).then(function(u){var r;if(Array.isArray(u)){l._.list=u}u=[];r=l._.list.map(function(r){var e,t;e=r.widget.manager?r.widget.manager():[];if(!e.length){return Promise.resolve(u.push(r))}else if(r.status===2){t=r.widget.errors()||[];if(!(t.length===1&&t[0]==="nested")){u.push(r)}}return Promise.all(e.map(function(l){return l.check(null,{now:true,force:f,skipEmpty:true}).then(function(r){var e,t,n,i,o=[];r==null&&(r=[]);for(e=0,t=r.length;e<t;++e){n=r[e];i=n.widget.errors()||[];if(i.length===1&&i[0]==="nested"){continue}o.push(u.push(import$({mgr:l},n)))}return o})}))});return Promise.all(r).then(function(){var e;e={};return l._.list=u.filter(function(r){if(e[r.path]&&in$(r.mgr,e[r.path])){return false}if(!e[r.path]){e[r.path]=[]}e[r.path].push(r.mgr);return true})})}).then(function(){var r,e,t,n,i,o;if(!f){return}r=l._.list.map(function(r){return r.widget.root()});e=!l._.node?r[0]:r[(r.indexOf(l._.node)+1)%r.length];l._.node=e;if(!e){return}t=e.getBoundingClientRect();n=l.findScrollableParent(e);i=!(t.top<0||t.top+t.height>window.innerHeight);o=t.top+n.scrollTop-60;return n.scrollTo({top:o,behavior:"smooth"})})}),ref$);function import$(r,e){var t={}.hasOwnProperty;for(var n in e)if(t.call(e,n))r[n]=e[n];return r}function in$(r,e){var t=-1,n=e.length>>>0;while(++t<n)if(r===e[t])return true;return false}var mgr,formmgr,fields,sampleValue,customFormmgr,formctl,view;mgr=new block.manager({registry:function(e){var r,t,n,o,i;r=e.ns,t=e.name,n=e.version,o=e.path,i=e.type;if(i==="block"){return r==="local"?"/block/"+t+"/index.html":"https://cdn.jsdelivr.net/npm/"+t+"@latest/index.html"}return"/assets/lib/"+t+"/"+(n||"main")+"/"+(o||"index.min.js")}});formmgr=new form.manager;fields={_:{type:{ns:"local",name:"contact"},meta:{}}};sampleValue={_:{sig:{count:0,ts:Date.now(),token:Math.random().toString(36)},object:{name:{v:"Form Manager Test"},title:{v:"Some Title"}}}};if(!(customFormmgr=false)){formmgr=null;sampleValue=sampleValue["_"]["object"];fields={}}formctl=new form.controller({formmgr:formmgr,root:ld$.find("[ld=form]",0),widget:!customFormmgr?{ns:"local",name:"contact"}:null,meta:{}});view=new ldview({initRender:false,root:document.body,action:{click:{validate:function(){return formctl.check({force:true}).now().then(function(){return view.render()})},dump:function(){return console.log(formctl.formmgr().value())},order:function(){return console.log(formctl.formmgr().order())}}},handler:{"progress-bar":function(e){var r,t;r=e.node;t=formctl.formmgr().progress();return r.style.width=(t.percent*100).toFixed(2)+"%"},widget:{list:function(){var e,r,t,n=[];for(e in r=fields){t=r[e];n.push({k:e,v:t})}return n},key:function(e){return e.k},view:{init:{"@":function(e){var r,t,n;r=e.node,t=e.ctx;n=typeof t.v.type==="string"?{name:t.v.type}:t.v.type;return mgr.from(n,{root:r,data:{}}).then(function(e){t.itf=e["interface"];t.instance=e.instance;t.itf.deserialize(t.v.meta,{init:true});return formmgr.add({path:"_",widget:t.itf})})}}}}}});view.init().then(function(){return formctl.init()}).then(function(){return formctl.formmgr().value(sampleValue)}).then(function(){return formctl.check({init:true}).now()}).then(function(){return formctl.formmgr().on("change",function(){return view.render()})}).then(function(){return view.render()});</script></body></html>